
import { Router } from '@ohos.router';
import Logger from '../common/util/Logger';
import { MediaItem } from '../data/bean/MediaItem';
import { SearchHistoryItem } from '../../data/repository/SearchHistoryRepository';
import { mediaService } from '../service/media/MediaService';
import { SearchType, SearchFilter, SearchSort } from '../data/dto/SearchDto';

/**
 * æœç´¢é¡µé¢ç»„ä»¶
 * å®ç°åª’ä½“æœç´¢åŠŸèƒ½ï¼ŒåŒ…æ‹¬æœç´¢è¾“å…¥ã€ç»“æœå±•ç¤ºã€å†å²æœç´¢ç­‰
 */
@Component
struct SearchPage {
  private readonly TAG: string = 'SearchPage';
  
  // çŠ¶æ€ç®¡ç†
  @State searchQuery: string = '';
  @State searchResults: MediaItem[] = [];
  @State hotKeywords: string[] = [];
  @State searchHistory: SearchHistoryItem[] = [];
  @State isLoading: boolean = false;
  @State isSearching: boolean = false;
  @State errorMessage: string = '';
  @State currentPage: number = 1;
  @State hasMoreResults: boolean = true;
  @State showHistory: boolean = true;
  @State displayMode: 'list' | 'grid' = 'list'; // æ˜¾ç¤ºæ¨¡å¼ï¼šåˆ—è¡¨æˆ–ç½‘æ ¼
  @State showFilterPanel: boolean = false; // æ˜¯å¦æ˜¾ç¤ºç­›é€‰é¢æ¿
  @State filters: SearchFilter = {}; // å½“å‰ç­›é€‰æ¡ä»¶
  
  // åˆ†é¡µé…ç½®
  private pageSize: number = 20;
  private searchDebounceTimer: number | null = null;
  
  /**
   * é¡µé¢åŠ è½½æ—¶è°ƒç”¨
   */
  aboutToAppear(): void {
    Logger.info(this.TAG, 'SearchPage appeared');
    
    // è·å–è·¯ç”±å‚æ•°ä¸­çš„æœç´¢è¯
    const params = Router.getParams();
    if (params?.['query']) {
      this.searchQuery = params['query'];
      this.performSearch();
    } else {
      // åŠ è½½çƒ­é—¨æœç´¢è¯
      this.loadHotKeywords();
    }
    
    // åŠ è½½æœç´¢å†å²
    this.loadSearchHistory();
  }
  
  /**
   * é¡µé¢å¸è½½æ—¶è°ƒç”¨
   */
  aboutToDisappear(): void {
    Logger.info(this.TAG, 'SearchPage disappeared');
    
    // æ¸…ç†å®šæ—¶å™¨
    if (this.searchDebounceTimer) {
      clearTimeout(this.searchDebounceTimer);
    }
  }
  
  /**
   * åŠ è½½çƒ­é—¨æœç´¢è¯
   */
  private loadHotKeywords(): void {
    try {
      mediaService.getHotSearchKeywords(10).then((data) => {
        this.hotKeywords = data;
        Logger.info(this.TAG, `Loaded ${this.hotKeywords.length} hot keywords`);
      });
    } catch (error) {
      Logger.error(this.TAG, `Failed to load hot keywords: ${error}`);
      // ä½¿ç”¨é»˜è®¤çƒ­é—¨å…³é”®è¯
      this.hotKeywords = ['çƒ­é—¨ç”µå½±', 'æœ€æ–°å‰§é›†', 'ç»å…¸åŠ¨æ¼«', 'ç§‘å¹»å¤§ç‰‡', 'çˆ±æƒ…å–œå‰§'];
    }
  }
  
  /**
   * åŠ è½½æœç´¢å†å²
   */
  private loadSearchHistory(): void {
    try {
      // è¿™é‡Œåº”è¯¥ä»æœ¬åœ°å­˜å‚¨ä¸­è¯»å–æœç´¢å†å²
      // æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
      const history = ['å¤ä»‡è€…è”ç›Ÿ', 'æµ·è´¼ç‹', 'æ˜Ÿé™…ç©¿è¶Š'];
      this.searchHistory = history;
      Logger.info(this.TAG, `Loaded ${this.searchHistory.length} search history items`);
    } catch (error) {
      Logger.error(this.TAG, `Failed to load search history: ${error}`);
      this.searchHistory = [];
    }
  }
  
  /**
   * ä¿å­˜æœç´¢å†å²
   */
  private saveSearchHistory(keyword: string): void {
    try {
      // å»é‡å¹¶é™åˆ¶æ•°é‡
      let history = this.searchHistory.filter(item => item !== keyword);
      history.unshift(keyword);
      history = history.slice(0, 10); // æœ€å¤šä¿å­˜10æ¡
      
      this.searchHistory = history;
      
      // è¿™é‡Œåº”è¯¥ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
      Logger.info(this.TAG, `Search history saved: ${keyword}`);
    } catch (error) {
      Logger.error(this.TAG, `Failed to save search history: ${error}`);
    }
  }
  
  /**
   * æ¸…é™¤æœç´¢å†å²
   */
  private clearSearchHistory(): void {
    try {
      this.searchHistory = [];
      // è¿™é‡Œåº”è¯¥æ¸…é™¤æœ¬åœ°å­˜å‚¨ä¸­çš„æœç´¢å†å²
      Logger.info(this.TAG, 'Search history cleared');
    } catch (error) {
      Logger.error(this.TAG, `Failed to clear search history: ${error}`);
    }
  }
  
  /**
   * å¤„ç†æœç´¢è¾“å…¥å˜åŒ–
   */
  private handleSearchInputChange(value: string): void {
    this.searchQuery = value;
    
    // é˜²æŠ–å¤„ç†
    if (this.searchDebounceTimer) {
      clearTimeout(this.searchDebounceTimer);
    }
    
    // è¾“å…¥åœæ­¢300msåæ‰§è¡Œæœç´¢
    this.searchDebounceTimer = setTimeout(() => {
      if (value.trim().length >= 2) {
        this.performSearch();
      } else if (value.trim().length === 0) {
        this.resetSearchState();
      }
    }, 300);
  }
  
  /**
   * æ‰§è¡Œæœç´¢
   */
  private performSearch(): void {
    const query = this.searchQuery.trim();
    if (!query) return;
    
    this.isSearching = true;
    this.isLoading = true;
    this.errorMessage = '';
    this.showHistory = false;
    this.currentPage = 1;
    
    try {
      // ä¿å­˜æœç´¢å†å²
      this.saveSearchHistory(query);
      
      // æ‰§è¡Œæœç´¢ï¼Œä¼ é€’ç­›é€‰æ¡ä»¶
      Logger.info(this.TAG, `Searching for: ${query} with filters:`, JSON.stringify(this.filters));
      
      // æ„å»ºæœç´¢å‚æ•°ï¼ŒåŒ…å«ç­›é€‰æ¡ä»¶
      const searchParams = {
        keyword: query,
        type: SearchType.All,
        page: this.currentPage,
        pageSize: this.pageSize,
        ...this.filters // åˆå¹¶ç­›é€‰æ¡ä»¶
      };
      
      mediaService.searchMedia(searchParams).then((result) => {
        // å¤„ç†æœç´¢ç»“æœ
        this.searchResults = result.items || [];
        this.hasMoreResults = result.hasMore || false;
        
        Logger.info(this.TAG, `Search completed, found ${this.searchResults.length} results`);
        this.isLoading = false;
        this.isSearching = false;
      }).catch((error) => {
        Logger.error(this.TAG, `Search failed: ${error}`);
        this.errorMessage = 'æœç´¢å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
        this.searchResults = [];
        this.hasMoreResults = false;
        this.isLoading = false;
        this.isSearching = false;
      });
    } catch (error) {
      Logger.error(this.TAG, `Search failed: ${error}`);
      this.errorMessage = 'æœç´¢å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
      this.searchResults = [];
      this.hasMoreResults = false;
      this.isLoading = false;
      this.isSearching = false;
    }
  }
  
  /**
   * åŠ è½½æ›´å¤šæœç´¢ç»“æœ
   */
  private loadMoreResults(): void {
    if (!this.hasMoreResults || this.isLoading || !this.searchQuery.trim()) return;
    
    this.isLoading = true;
    this.currentPage++;
    
    try {
      const query = this.searchQuery.trim();
      Logger.info(this.TAG, `Loading more results for: ${query}, page ${this.currentPage}`);
      
      // æ„å»ºæœç´¢å‚æ•°ï¼ŒåŒ…å«ç­›é€‰æ¡ä»¶
      const searchParams = {
        keyword: query,
        type: SearchType.All,
        page: this.currentPage,
        pageSize: this.pageSize,
        ...this.filters // åˆå¹¶ç­›é€‰æ¡ä»¶
      };
      
      mediaService.searchMedia(searchParams).then((result) => {
        if (result && result.items && result.items.length > 0) {
          this.searchResults = [...this.searchResults, ...result.items];
          this.hasMoreResults = result.hasMore || false;
        } else {
          this.hasMoreResults = false;
        }
        this.isLoading = false;
      }).catch((error) => {
        Logger.error(this.TAG, `Failed to load more results: ${error}`);
        this.errorMessage = 'åŠ è½½æ›´å¤šç»“æœå¤±è´¥';
        this.isLoading = false;
      });
    } catch (error) {
      Logger.error(this.TAG, `Failed to load more results: ${error}`);
      this.errorMessage = 'åŠ è½½æ›´å¤šç»“æœå¤±è´¥';
      this.isLoading = false;
    }
  }
  
  /**
   * é‡ç½®æœç´¢çŠ¶æ€
   */
  private resetSearchState(): void {
    this.searchResults = [];
    this.showHistory = true;
    this.errorMessage = '';
    this.currentPage = 1;
    this.hasMoreResults = true;
  }
  
  /**
   * å¤„ç†å…³é”®è¯ç‚¹å‡»
   */
  private handleKeywordClick(keyword: string): void {
    this.searchQuery = keyword;
    this.performSearch();
  }
  
  /**
   * å¤„ç†æœç´¢ç»“æœé¡¹ç‚¹å‡»
   */
  private handleSearchResultClick(media: MediaItem): void {
    Logger.info(this.TAG, `Search result clicked: ${media.title}`);
    // è·³è½¬åˆ°è¯¦æƒ…é¡µ
    Router.push({
      url: 'pages/MediaDetailPage',
      params: {
        mediaId: media.id,
        siteKey: media.siteKey
      }
    });
  }
  
  /**
   * å¤„ç†æ¸…é™¤æŒ‰é’®ç‚¹å‡»
   */
  private handleClearInput(): void {
    this.searchQuery = '';
    this.resetSearchState();
  }
  
  /**
   * å¤„ç†è¿”å›
   */
  private handleBack(): void {
    Router.back();
  }
  
  /**
   * æ¸²æŸ“æœç´¢è¾“å…¥æ¡†
   */
  @Builder
  private renderSearchInput(): void {
    Stack.create();
    Stack.className("search-input-container");
    Button.create();
    Button.className("back-button");
    Button.onClick(this.handleBack);
    Text.create();
    Text.content("â†");
    Text.pop();
    Button.pop();
    Flex.create();
    Flex.className("search-input-wrapper");
    Text.create();
    Text.className("search-icon");
    Text.content("ğŸ”");
    Text.pop();
    TextInput.create();
    TextInput.className("search-input");
    TextInput.value(this.searchQuery);
    TextInput.onChange(this.handleSearchInputChange);
    TextInput.onSubmit(this.performSearch);
    TextInput.placeholder("æœç´¢ç”µå½±ã€ç”µè§†å‰§ã€åŠ¨æ¼«...");
    TextInput.enterKeyType("search");
    TextInput.autoFocus(true);
    TextInput.pop();
    if (this.searchQuery) {
      Button.create();
      Button.className("clear-button");
      Button.onClick(this.handleClearInput);
      Text.create();
      Text.content("âœ•");
      Text.pop();
      Button.pop();
    }
    Flex.pop();
    Button.create();
    Button.className("search-button");
    Button.onClick(this.performSearch);
    Text.create();
    Text.content("æœç´¢");
    Text.pop();
    Button.pop();
    Stack.pop();
  }
  
  /**
   * æ¸²æŸ“çƒ­é—¨æœç´¢
   */
  @Builder
  private renderHotKeywords(): void {
    Stack.create();
    Stack.className("hot-keywords-section");
    Flex.create();
    Flex.className("section-header");
    Text.create();
    Text.className("section-title");
    Text.content("çƒ­é—¨æœç´¢");
    Text.pop();
    Flex.pop();
    Flex.create();
    Flex.className("keywords-container");
    Flex.wrap("wrap");
    this.hotKeywords.forEach((keyword, index) => {
      Tag.create();
      Tag.key(`hot-${index}`);
      Tag.className("keyword-tag hot");
      Tag.onClick(() => this.handleKeywordClick(keyword));
      Text.create();
      Text.className("keyword-rank");
      Text.content((index + 1).toString());
      Text.pop();
      Text.create();
      Text.content(keyword);
      Text.pop();
      Tag.pop();
    });
    Flex.pop();
    Stack.pop();
  }
  
  /**
   * æ¸²æŸ“æœç´¢å†å²
   */
  @Builder
  private renderSearchHistory(): void {
    if (this.searchHistory.length === 0) return;
    
    Stack.create();
    Stack.className("search-history-section");
    Flex.create();
    Flex.className("section-header");
    Text.create();
    Text.className("section-title");
    Text.content("æœç´¢å†å²");
    Text.pop();
    Button.create();
    Button.className("clear-history-button");
    Button.onClick(this.clearSearchHistory);
    Text.create();
    Text.content("æ¸…é™¤");
    Text.pop();
    Button.pop();
    Flex.pop();
    Flex.create();
    Flex.className("keywords-container");
    Flex.wrap("wrap");
    this.searchHistory.forEach((keyword, index) => {
      Tag.create();
      Tag.key(`history-${index}`);
      Tag.className("keyword-tag history");
      Tag.onClick(() => this.handleKeywordClick(keyword));
      Text.create();
      Text.className("history-icon");
      Text.content("ğŸ•");
      Text.pop();
      Text.create();
      Text.content(keyword);
      Text.pop();
      Tag.pop();
    });
    Flex.pop();
    Stack.pop();
  }
  
  /**
   * æ¸²æŸ“æœç´¢ç»“æœé¡¹
   */
  @Builder
  private renderSearchResultItem(media: MediaItem): void {
    ListItem.create();
    ListItem.onClick(() => this.handleSearchResultClick(media));
    Flex.create();
    Flex.className("search-result-item");
    Image.create();
    Image.src(media.coverUrl || "https://via.placeholder.com/100x150?text=No+Image");
    Image.className("result-cover");
    Image.objectFit("cover");
    Image.pop();
    Flex.create();
    Flex.className("result-info");
    Flex.direction("column");
    Text.create();
    Text.className("result-title");
    Text.numberOfLines(2);
    Text.content(media.title);
    Text.pop();
    Flex.create();
    Flex.className("result-meta");
    if (media.year) {
      Tag.create();
      Tag.className("meta-tag");
      Text.create();
      Text.content(media.year);
      Text.pop();
      Tag.pop();
    }
    if (media.type) {
      Tag.create();
      Tag.className("meta-tag");
      Text.create();
      Text.content(media.type);
      Text.pop();
      Tag.pop();
    }
    if (media.score) {
      Tag.create();
      Tag.className("meta-tag score");
      Text.create();
      Text.content(media.score);
      Text.pop();
      Tag.pop();
    }
    Flex.pop();
    if (media.description) {
      Text.create();
      Text.className("result-description");
      Text.numberOfLines(2);
      Text.content(media.description);
      Text.pop();
    }
    if (media.directors && media.directors.length > 0) {
      Text.create();
      Text.className("result-directors");
      Text.numberOfLines(1);
      Text.content(`å¯¼æ¼”: ${media.directors.slice(0, 3).join(', ')}`);
      Text.pop();
    }
    if (media.actors && media.actors.length > 0) {
      Text.create();
      Text.className("result-actors");
      Text.numberOfLines(1);
      Text.content(`ä¸»æ¼”: ${media.actors.slice(0, 3).join(', ')}`);
      Text.pop();
    }
    Flex.pop();
    Flex.pop();
    ListItem.pop();
  }
  
  /**
   * æ¸²æŸ“æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢æŒ‰é’®
   */
  @Builder
  private renderDisplayModeToggle(): void {
    Button.create();
    Button.className("display-mode-toggle");
    Button.onClick(this.toggleDisplayMode);
    Button.type("circle");
    Button.size("small");
    Text.create();
    Text.content(this.displayMode === 'list' ? 'ç½‘æ ¼' : 'åˆ—è¡¨');
    Text.pop();
    Button.pop();
  }
  
  /**
   * æ¸²æŸ“ç­›é€‰æŒ‰é’®
   */
  @Builder
  private renderFilterButton(): void {
    Button.create();
    Button.className("filter-button");
    Button.onClick(this.toggleFilterPanel);
    Button.type("text");
    Button.size("small");
    Text.create();
    Text.content("ç­›é€‰");
    Text.pop();
    Button.pop();
  }
  
  /**
   * æ¸²æŸ“ç­›é€‰é¢æ¿
   */
  @Builder
  private renderFilterPanel(): void {
    if (!this.showFilterPanel) return;
    
    Stack.create();
    Stack.className("filter-panel-overlay");
    Stack.onClick(this.toggleFilterPanel);
    Stack.create();
    Stack.className("filter-panel");
    Stack.onClick((e) => e.stopPropagation());
    Stack.create();
    Stack.className("filter-header");
    Text.create();
    Text.className("filter-title");
    Text.content("ç­›é€‰æ¡ä»¶");
    Text.pop();
    Button.create();
    Button.onClick(this.toggleFilterPanel);
    Button.type("text");
    Button.size("small");
    Button.pop();
    Stack.pop();
    
    ScrollView.create();
    ScrollView.className("filter-content");
    // åª’ä½“ç±»å‹ç­›é€‰
    Stack.create();
    Stack.className("filter-section");
    Text.create();
    Text.className("filter-section-title");
    Text.content("åª’ä½“ç±»å‹");
    Text.pop();
    Flex.create();
    Flex.className("filter-options");
    CheckboxGroup.create();
    Checkbox.create();
    Checkbox.value("movie");
    Checkbox.onChange((value) => this.updateMediaTypeFilter('movie', value));
    Text.create();
    Text.content("ç”µå½±");
    Text.pop();
    Checkbox.pop();
    Checkbox.create();
    Checkbox.value("tv");
    Checkbox.onChange((value) => this.updateMediaTypeFilter('tv', value));
    Text.create();
    Text.content("ç”µè§†å‰§");
    Text.pop();
    Checkbox.pop();
    Checkbox.create();
    Checkbox.value("anime");
    Checkbox.onChange((value) => this.updateMediaTypeFilter('anime', value));
    Text.create();
    Text.content("åŠ¨æ¼«");
    Text.pop();
    Checkbox.pop();
    Checkbox.create();
    Checkbox.value("variety");
    Checkbox.onChange((value) => this.updateMediaTypeFilter('variety', value));
    Text.create();
    Text.content("ç»¼è‰º");
    Text.pop();
    Checkbox.pop();
    CheckboxGroup.pop();
    Flex.pop();
    Stack.pop();
    
    // æ’åºæ–¹å¼
    Stack.create();
    Stack.className("filter-section");
    Text.create();
    Text.className("filter-section-title");
    Text.content("æ’åºæ–¹å¼");
    Text.pop();
    RadioGroup.create();
    RadioGroup.onChange((value) => {
      this.filters.sortBy = value;
    });
    Radio.create();
    Radio.value("time");
    Text.create();
    Text.content("æœ€æ–°");
    Text.pop();
    Radio.pop();
    Radio.create();
    Radio.value("score");
    Text.create();
    Text.content("è¯„åˆ†");
    Text.pop();
    Radio.pop();
    Radio.create();
    Radio.value("hot");
    Text.create();
    Text.content("çƒ­åº¦");
    Text.pop();
    Radio.pop();
    RadioGroup.pop();
    Stack.pop();
    ScrollView.pop();
    
    Stack.create();
    Stack.className("filter-actions");
    Button.create();
    Button.onClick(this.resetFilters);
    Button.type("text");
    Text.create();
    Text.content("é‡ç½®");
    Text.pop();
    Button.pop();
    Button.create();
    Button.onClick(this.applyFilters);
    Button.type("capsule");
    Text.create();
    Text.content("åº”ç”¨ç­›é€‰");
    Text.pop();
    Button.pop();
    Stack.pop();
    Stack.pop();
    Stack.pop();
  }

  /**
   * æ›´æ–°åª’ä½“ç±»å‹ç­›é€‰
   */
  private updateMediaTypeFilter(type: string, checked: boolean): void {
    if (!this.filters.types) {
      this.filters.types = [];
    }
    
    if (checked) {
      if (!this.filters.types.includes(type)) {
        this.filters.types.push(type);
      }
    } else {
      const index = this.filters.types.indexOf(type);
      if (index > -1) {
        this.filters.types.splice(index, 1);
      }
    }
  }

  /**
   * æ¸²æŸ“ç½‘æ ¼æ¨¡å¼çš„æœç´¢ç»“æœé¡¹
   */
  @Builder
  private renderGridItem(item: MediaItem): void {
    GridItem.create();
    GridItem.className("grid-item");
    GridItem.onClick(() => this.handleSearchResultClick(item));
    Stack.create();
    Stack.className("grid-item-content");
    Image.create();
    Image.className("grid-item-image");
    Image.src(item.coverUrl || item.posterUrl || "https://via.placeholder.com/100x150?text=No+Image");
    Image.objectFit("cover");
    Image.pop();
    Stack.create();
    Stack.className("grid-item-overlay");
    Text.create();
    Text.className("grid-item-title");
    Text.numberOfLines(2);
    Text.content(item.title);
    Text.pop();
    if (item.year) {
      Text.create();
      Text.className("grid-item-year");
      Text.content(item.year);
      Text.pop();
    }
    Stack.pop();
    Stack.pop();
    GridItem.pop();
  }

  /**
   * æ¸²æŸ“æœç´¢ç»“æœ
   */
  @Builder
  private renderSearchResults(): void {
    if (this.displayMode === 'list') {
      List.create();
      List.className("search-results-list");
      this.searchResults.forEach((item) => {
        this.renderSearchResultItem(item);
      });
      List.pop();
    } else {
      Grid.create();
      Grid.className("search-results-grid");
      Grid.columnsTemplate("1fr 1fr 1fr");
      Grid.rowsTemplate("auto");
      Grid.gap("8px");
      this.searchResults.forEach((item) => {
        this.renderGridItem(item);
      });
      Grid.pop();
    }
  }
  
  /**
   * æ¸²æŸ“åŠ è½½çŠ¶æ€
   */
  @Builder
  private renderLoading(): void {
    Stack.create();
    Stack.className("loading-container");
    LoadingProgress.create();
    LoadingProgress.className("loading-progress");
    LoadingProgress.color("#FF4500");
    LoadingProgress.pop();
    Text.create();
    Text.content("æœç´¢ä¸­...");
    Text.pop();
    Stack.pop();
  }
  
  /**
   * æ¸²æŸ“é”™è¯¯çŠ¶æ€
   */
  @Builder
  private renderError(): void {
    Stack.create();
    Stack.className("error-container");
    Text.create();
    Text.className("error-icon");
    Text.content("âš ï¸");
    Text.pop();
    Text.create();
    Text.className("error-message");
    Text.content(this.errorMessage);
    Text.pop();
    Button.create();
    Button.className("retry-button");
    Button.onClick(this.performSearch);
    Text.create();
    Text.content("é‡è¯•");
    Text.pop();
    Button.pop();
    Stack.pop();
  }
  
  /**
   * ç»„ä»¶æ¸²æŸ“
   */
  build() {
    Stack.create();
    Stack.className("search-page");
    // æœç´¢è¾“å…¥åŒºåŸŸ
    this.renderSearchInput();
    
    // ä¸»å†…å®¹åŒºåŸŸ
    ScrollView.create();
    ScrollView.className("content-scroll");
    ScrollView.scrollBar("auto");
    if (this.isSearching && this.isLoading && this.currentPage === 1) {
      this.renderLoading();
    } else if (this.errorMessage) {
      this.renderError();
    } else if (this.showHistory) {
      Stack.create();
      this.renderHotKeywords();
      this.renderSearchHistory();
      Stack.pop();
    } else {
      this.renderSearchResults();
    }
    
    Blank.create();
    Blank.className("bottom-space");
    Blank.pop();
    ScrollView.pop();
    Stack.pop();
  }
}

export default SearchPage;