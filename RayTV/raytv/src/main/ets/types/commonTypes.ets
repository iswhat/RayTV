// é€šç”¨ç±»å‹å®šä¹‰æ–‡ä»¶
// ä¸ºé¡¹ç›®ä¸­å¸¸è§çš„æ•°æ®ç»“æ„æä¾›æ˜ç¡®çš„ç±»å‹å®šä¹‰ï¼Œå‡å°‘å¯¹anyç±»å‹çš„ä¾èµ?
// å¼•å…¥ArkTSå…¼å®¹çš„å·¥å…·ç±»å?import { ArkTSBaseTypes, ArkTSUtilityTypes } from '../common/util/ark/types/ArkTSBaseTypes';
import { ArkTSPartial, ArkTSRequired, ArkTSPick, ArkTSOmit, ArkTSRecord, ArkTSReadonly } from '../common/util/ark/types/ArkTSUtilityTypes';

/**
 * åŸºç¡€å“åº”å¯¹è±¡ç±»å‹
 */
export interface ApiResponse<T> {
  code: number;
  message: string;
  data?: T;
  success: boolean;
}

/**
 * åˆ†é¡µå“åº”å¯¹è±¡ç±»å‹
 */
export interface PaginatedResponse<T> {
  data: T[];
  total: number;
  page: number;
  pageSize: number;
  totalPages: number;
}

// é‡å‘½åä»¥é¿å…ä¸æ ‡å‡†åº“å†²çª
export type Partial<T> = ArkTSPartial<T>;
export type Required<T> = ArkTSRequired<T>;
export type Pick<T, K extends keyof T> = ArkTSPick<T, K>;
export type Omit<T, K extends keyof T> = ArkTSOmit<T, K>;
export type Record<K extends string | number | symbol, T> = ArkTSRecord<K, T>;
export type Readonly<T> = ArkTSReadonly<T>;

/**
 * åª’ä½“é¡¹åŸºç¡€ç±»å‹
 */
export interface MediaItem {
  id: string;
  title: string;
  coverUrl?: string;
  description?: string;
  duration?: number;
  releaseDate?: string;
  rating?: number;
}

/**
 * è§†é¢‘ä¿¡æ¯ç±»å‹
 */
export interface VideoInfo extends MediaItem {
  videoUrl?: string;
  quality?: string;
  subtitles?: SubtitleInfo[];
  audioTracks?: AudioTrackInfo[];
}

/**
 * å­—å¹•ä¿¡æ¯ç±»å‹
 */
export interface SubtitleInfo {
  id: string;
  language: string;
  name: string;
  url: string;
  isDefault?: boolean;
}

/**
 * éŸ³é¢‘è½¨é“ä¿¡æ¯ç±»å‹
 */
export interface AudioTrackInfo {
  id: string;
  language: string;
  name: string;
  codec?: string;
  isDefault?: boolean;
}

/**
 * ç”¨æˆ·ä¿¡æ¯ç±»å‹
 */
export interface UserInfo {
  id: string;
  username: string;
  avatar?: string;
  email?: string;
  phone?: string;
  nickname?: string;
  level?: number;
  createdAt?: string;
  updatedAt?: string;
}

/**
 * ç”¨æˆ·è®¤è¯ä¿¡æ¯ç±»å‹
 */
export interface AuthInfo {
  token: string;
  refreshToken?: string;
  expiresIn?: number;
  userInfo: UserInfo;
}

/**
 * é…ç½®é¡¹ç±»å? */
export interface ConfigItem {
  key: string;
  value: string | number | boolean;
  type: 'string' | 'number' | 'boolean';
  description?: string;
  defaultValue?: string | number | boolean;
}

/**
 * ç¼“å­˜é€‰é¡¹ç±»å‹
 */
export interface CacheOptions<T> {
  key: string;
  value: T;
  ttl?: number; // è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  tags?: string[]; // æ ‡ç­¾ï¼Œç”¨äºæ‰¹é‡åˆ é™?}

/**
 * æœç´¢å‚æ•°ç±»å‹
 */
export interface SearchParams {
  keyword?: string;
  page?: number;
  pageSize?: number;
  filters?: Record<string, string | number | boolean | string[]>;
  sortBy?: string;
  sortOrder?: 'asc' | 'desc';
}

/**
 * å†å²è®°å½•é¡¹ç±»å? */
export interface HistoryItem {
  id: string;
  userId: string;
  mediaId: string;
  mediaType: 'video' | 'audio' | 'image';
  progress: number;
  lastPlayed: string;
  totalDuration?: number;
  extra?: Record<string, Serializable>;
}

/**
 * æ”¶è—é¡¹ç±»å? */
export interface FavoriteItem {
  id: string;
  userId: string;
  mediaId: string;
  mediaType: 'video' | 'audio' | 'image' | 'playlist';
  addedAt: string;
  note?: string;
  extra?: Record<string, Serializable>;
}

/**
 * è®¾å¤‡ä¿¡æ¯ç±»å‹
 */
export interface DeviceInfo {
  deviceId: string;
  deviceName: string;
  deviceType: string;
  osVersion: string;
  appVersion: string;
  ipAddress?: string;
  lastActive?: string;
}

/**
 * HTTPè¯·æ±‚é€‰é¡¹ç±»å‹
 */
export interface HttpRequestOptions {
  url: string;
  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';
  headers?: Record<string, string>;
  params?: Record<string, string | number | boolean>;
  data?: Record<string, string | number | boolean | null> | string;
  timeout?: number;
  responseType?: 'json' | 'text';
  withCredentials?: boolean;
}

/**
 * HTTPå“åº”ç±»å‹
 */
export interface HttpResponse<T> {
  status: number;
  statusText: string;
  data: T;
  headers: Record<string, string>;
  config?: HttpRequestOptions;
}

/**
 * é”™è¯¯ä¿¡æ¯ç±»å‹
 */
export interface ErrorInfo {
  code: string;
  message: string;
  details?: Record<string, Serializable>;
  timestamp?: number;
}

/**
 * äº‹ä»¶ç›‘å¬å™¨ç±»å? */
export interface EventListenerOptions {
  once?: boolean;
  priority?: number;
}

/**
 * äº‹ä»¶å¤„ç†å‡½æ•°ç±»å‹
 */
export type EventHandler<T> = (event: T) => void | Promise<void>;

/**
 * é€šç”¨å›è°ƒå‡½æ•°ç±»å‹
 */
export interface Callback<T = void, E = Error> {
  (error?: E | null, result?: T): void;
}

/**
 * å¯å–æ¶ˆçš„Promiseç±»å‹
 */
export interface CancellablePromise<T> extends Promise<T> {
  cancel: () => void;
}

/**
 * é€šç”¨IDç±»å‹
 */
export type ID = string | number;

/**
 * ç©ºå€¼ç±»å? */
export type Empty = null | undefined | void;

/**
 * å¯åºåˆ—åŒ–çš„å¯¹è±¡æ¥å? */
export interface SerializableObject {
  // ArkTSå…¼å®¹ï¼šä¸ä½¿ç”¨ç´¢å¼•ç­¾åï¼Œä½¿ç”¨æ˜ç¡®çš„æ¥å£å®šä¹‰
  getSerializable(key: string): Serializable;
  setSerializable(key: string, value: Serializable): void;
  hasSerializable(key: string): boolean;
  toPlainObject(): Record<string, Serializable>;
}

/**
 * å¯åºåˆ—åŒ–çš„å€¼ç±»å? */
export type Serializable = 
  | string
  | number
  | boolean
  | null
  | undefined
  | Serializable[]
  | SerializableObject;

/**
 * æ·±åªè¯»ç±»å? */
// ArkTSå…¼å®¹çš„æ·±åªè¯»å®ç° - ç®€åŒ–ç‰ˆæœ?export interface DeepReadonlyObject {
  // ArkTSå…¼å®¹ï¼šä¸ä½¿ç”¨ç´¢å¼•ç­¾å
  getReadonly(key: string): DeepReadonlyValue;
  hasReadonly(key: string): boolean;
}

// ç®€åŒ–ç‰ˆï¼šç›´æ¥è¿”å›å¯¹è±¡ç±»å‹ï¼Œä¸ä½¿ç”¨æ¡ä»¶ç±»å?export type DeepReadonlyValue = 
  | string
  | number
  | boolean
  | null
  | undefined
  | ReadonlyArray<DeepReadonlyValue>
  | DeepReadonlyObject;

/**
 * å¯é€‰é”®ç±»å‹
 */
// ArkTSå…¼å®¹çš„å¯é€‰å±æ€§å®ç?export interface OptionalBase<T> {
  // ArkTSå…¼å®¹ï¼šä¸ä½¿ç”¨ç´¢å¼•ç­¾å
  getOptional(key: string): T;
  hasOptional(key: string): boolean;
}

/**
 * å¿…éœ€é”®ç±»å? */
// ArkTSå…¼å®¹çš„å¿…éœ€å±æ€§å®ç?export interface RequiredBase<T> {
  // ArkTSå…¼å®¹ï¼šä¸ä½¿ç”¨ç´¢å¼•ç­¾å
  getRequired(key: string): T;
  hasRequired(key: string): boolean;
}

/**
 * ç©ºå¯¹è±¡ç±»å‹ï¼ˆénullä¸”éundefinedçš„å¯¹è±¡ï¼‰
 */
export type NonEmptyObject<T extends object> = T;

/**
 * æ’é™¤nullå’Œundefinedçš„ç±»å? */
// ArkTSå…¼å®¹çš„éç©ºç±»å‹å®ç?export type NonNullableValue<T> = T;

/**
 * é€šç”¨å‡½æ•°ç±»å‹ - æ¥å—ä»»æ„å‚æ•°ï¼Œè¿”å›ä»»æ„å€? */
export interface AnyFunction {
  (...args: never[]): never;
}

/**
 * å¼‚æ­¥å‡½æ•°ç±»å‹ - æ¥å—ä»»æ„å‚æ•°ï¼Œè¿”å›Promise
 */
export interface AsyncFunction<T> {
  (...args: never[]): Promise<T>;
}

/**
 * å»¶è¿Ÿæ‰§è¡Œçš„è¿”å›ç±»å? */
export interface DelayResult {
  clear: () => void;
  promise: Promise<void>;
}
