// Live.ets - ç›´æ’­å†…å®¹æ•°æ®æ¨¡å‹
// å®šä¹‰ç›´æ’­é¢‘é“ã€åˆ†ç»„å’ŒèŠ‚ç›®å•ç­‰ç›¸å…³æ•°æ®ç»“æ„

/**
 * ç›´æ’­æµä¿¡æ¯æ¥å? */
export interface LiveStream {
  id: string;            // æµID
  name: string;          // æµåç§?  url: string;           // æµåœ°å€
  type?: string;         // æµç±»å‹ï¼ˆm3u8ã€flvã€rtmpç­‰ï¼‰
  format?: string;       // è§†é¢‘æ ¼å¼
  resolution?: string;   // åˆ†è¾¨ç?  bitrate?: number;      // æ¯”ç‰¹ç?  codec?: string;        // ç¼–ç æ ¼å¼
  language?: string;     // è¯­è¨€
  subtitles?: string[];  // å­—å¹•åˆ—è¡¨
  isDefault?: boolean;   // æ˜¯å¦é»˜è®¤æµ?  isFallback?: boolean;  // æ˜¯å¦å¤‡ç”¨æµ?  pingUrl?: string;      // å¿ƒè·³æ£€æµ‹URL
  status?: 'online' | 'offline' | 'unknown'; // æµçŠ¶æ€?  lastCheckTime?: number; // æœ€åæ£€æŸ¥æ—¶é—?}

/**
 * ç›´æ’­åˆ†ç»„æ¥å£
 */
export interface LiveGroup {
  id: string;            // åˆ†ç»„ID
  name: string;          // åˆ†ç»„åç§°
  order: number;         // æ’åºæƒé‡
  icon?: string;         // åˆ†ç»„å›¾æ ‡
  channelCount?: number; // é¢‘é“æ•°é‡
  isExpanded?: boolean;  // æ˜¯å¦å±•å¼€
  isDefault?: boolean;   // æ˜¯å¦é»˜è®¤åˆ†ç»„
  createdAt?: number;    // åˆ›å»ºæ—¶é—´
  updatedAt?: number;    // æ›´æ–°æ—¶é—´
}

/**
 * èŠ‚ç›®å•ä¿¡æ¯æ¥å? */
export interface EpgItem {
  id: string;            // èŠ‚ç›®å•ID
  title: string;         // èŠ‚ç›®åç§°
  description?: string;  // èŠ‚ç›®æè¿°
  startTime: number;     // å¼€å§‹æ—¶é—´ï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼‰
  endTime: number;       // ç»“æŸæ—¶é—´ï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼?  cover?: string;        // èŠ‚ç›®å°é¢
  category?: string;     // èŠ‚ç›®ç±»åˆ«
  isLiveNow?: boolean;   // æ˜¯å¦æ­£åœ¨æ’­æ”¾
  isFavorite?: boolean;  // æ˜¯å¦æ”¶è—
  tags?: string[];       // æ ‡ç­¾
}

/**
 * ç›´æ’­é¢‘é“æ•°æ®æ¨¡å‹
 */
export interface LiveChannel {
  id: string;            // é¢‘é“ID
  name: string;          // é¢‘é“åç§°
  groupId: string;       // æ‰€å±åˆ†ç»„ID
  logo?: string;         // é¢‘é“Logo
  epgId?: string;        // èŠ‚ç›®å•ID
  streams: LiveStream[]; // ç›´æ’­æµåˆ—è¡?  order: number;         // æ’åºæƒé‡
  isFavorite?: boolean;  // æ˜¯å¦æ”¶è—
  isLocked?: boolean;    // æ˜¯å¦é”å®š
  password?: string;     // è§£é”å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
  playCount?: number;    // æ’­æ”¾æ¬¡æ•°
  lastPlayTime?: number; // æœ€åæ’­æ”¾æ—¶é—?  lastCheckTime?: number; // æœ€åæ£€æŸ¥æ—¶é—?  status?: 'online' | 'offline' | 'unknown'; // é¢‘é“çŠ¶æ€?  country?: string;      // æ‰€å±å›½å®?  language?: string;     // è¯­è¨€
  category?: string;     // é¢‘é“ç±»åˆ«
  description?: string;  // é¢‘é“æè¿°
  currentEpg?: EpgItem;  // å½“å‰èŠ‚ç›®ä¿¡æ¯
  nextEpg?: EpgItem;     // ä¸‹ä¸€ä¸ªèŠ‚ç›®ä¿¡æ?  sourceKey?: string;    // æ•°æ®æºæ ‡è¯?  customUrl?: string;    // è‡ªå®šä¹‰URL
  tags?: string[];       // æ ‡ç­¾
  createdAt?: number;    // åˆ›å»ºæ—¶é—´
  updatedAt?: number;    // æ›´æ–°æ—¶é—´
  userConfig?: LiveChannelUserConfig; // ç”¨æˆ·é…ç½®ä¿¡æ¯
}

/**
 * ç›´æ’­åˆ—è¡¨å“åº”æ¥å£
 */
export interface LiveListResponse {
  groups: LiveGroup[];   // åˆ†ç»„åˆ—è¡¨
  channels: LiveChannel[]; // é¢‘é“åˆ—è¡¨
  totalGroups: number;   // åˆ†ç»„æ€»æ•°
  totalChannels: number; // é¢‘é“æ€»æ•°
  sourceKey?: string;    // æ•°æ®æºæ ‡è¯?  refreshTime: number;   // åˆ·æ–°æ—¶é—´
  version?: string;      // ç‰ˆæœ¬å?}

/**
 * ç›´æ’­åˆ†ç»„è¯¦æƒ…æ¥å£
 */
export interface LiveGroupDetail {
  group: LiveGroup;      // åˆ†ç»„ä¿¡æ¯
  channels: LiveChannel[]; // è¯¥åˆ†ç»„ä¸‹çš„é¢‘é“åˆ—è¡?  totalChannels: number; // é¢‘é“æ€»æ•°
}

/**
 * ç›´æ’­æœç´¢ç»“æœæ¥å£
 */
export interface LiveSearchResult {
  channels: LiveChannel[]; // æœç´¢åˆ°çš„é¢‘é“åˆ—è¡¨
  total: number;         // æ€»æ•°
  keyword?: string;      // æœç´¢å…³é”®è¯?  groupId?: string;      // åˆ†ç»„ç­›é€?  category?: string;     // åˆ†ç±»ç­›é€?  country?: string;      // å›½å®¶ç­›é€?}

/**
 * é¢‘é“ç­›é€‰æ¡ä»¶æ¥å? */
export interface LiveFilter {
  groupId?: string;      // åˆ†ç»„ID
  keyword?: string;      // å…³é”®è¯?  country?: string;      // å›½å®¶
  language?: string;     // è¯­è¨€
  category?: string;     // åˆ†ç±»
  status?: string;       // çŠ¶æ€ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼?  isFavorite?: boolean;  // æ˜¯å¦æ”¶è—
}

/**
 * èŠ‚ç›®å•æŸ¥è¯¢è¯·æ±‚æ¥å? */
export interface EpgRequest {
  channelIds?: string[]; // é¢‘é“IDåˆ—è¡¨
  startTime?: number;    // å¼€å§‹æ—¶é—?  endTime?: number;      // ç»“æŸæ—¶é—´
  days?: number;         // æŸ¥è¯¢å¤©æ•°
}

/**
 * èŠ‚ç›®å•å“åº”æ¥å? */
export interface EpgResponse {
  epgData: Map<string, EpgItem[]>; // é¢‘é“IDåˆ°èŠ‚ç›®å•çš„æ˜ å°?  totalChannels: number; // åŒ…å«èŠ‚ç›®å•çš„é¢‘é“æ•°é‡
  totalPrograms: number; // èŠ‚ç›®å•æ€»æ•°
  updateTime: number;    // æ›´æ–°æ—¶é—´
}

/**
 * ç›´æ’­æºæ£€æµ‹ç»“æœæ¥å? */
export interface LiveStreamCheckResult {
  streamId: string;      // æµID
  channelId: string;     // é¢‘é“ID
  url: string;           // æµåœ°å€
  status: 'online' | 'offline' | 'timeout' | 'error'; // æ£€æµ‹çŠ¶æ€?  responseTime?: number; // å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  bitrate?: number;      // æ£€æµ‹åˆ°çš„æ¯”ç‰¹ç‡
  resolution?: string;   // æ£€æµ‹åˆ°çš„åˆ†è¾¨ç‡
  errorMessage?: string; // é”™è¯¯ä¿¡æ¯
  checkTime: number;     // æ£€æµ‹æ—¶é—?}

/**
 * ç›´æ’­æ”¶è—å¤¹æ¥å? */
export interface LiveFavoriteFolder {
  id: string;            // æ”¶è—å¤¹ID
  name: string;          // æ”¶è—å¤¹åç§?  channelIds: string[];  // é¢‘é“IDåˆ—è¡¨
  createTime: number;    // åˆ›å»ºæ—¶é—´
  updateTime: number;    // æ›´æ–°æ—¶é—´
  icon?: string;         // æ”¶è—å¤¹å›¾æ ?  description?: string;  // æ”¶è—å¤¹æè¿?}

/**
 * ç›´æ’­è§‚çœ‹å†å²æ¥å£
 */
export interface LiveWatchHistory {
  channelId: string;     // é¢‘é“ID
  channelName: string;   // é¢‘é“åç§°
  streamId?: string;     // è§‚çœ‹çš„æµID
  lastPlayTime: number;  // æœ€åè§‚çœ‹æ—¶é—?  playCount: number;     // è§‚çœ‹æ¬¡æ•°
  totalWatchTime?: number; // æ€»è§‚çœ‹æ—¶é•¿ï¼ˆæ¯«ç§’ï¼?}

/**
 * ç›´æ’­é¢‘é“ç”¨æˆ·é…ç½®æ¥å£
 */
export interface LiveChannelUserConfig {
  selectedStream?: string; // ç”¨æˆ·é€‰æ‹©çš„æµID
  volume?: number;         // ç”¨æˆ·è®¾ç½®çš„éŸ³é‡?  brightness?: number;     // ç”¨æˆ·è®¾ç½®çš„äº®åº?  contrast?: number;       // ç”¨æˆ·è®¾ç½®çš„å¯¹æ¯”åº¦
}

/**
 * ç›´æ’­æºç»Ÿè®¡ä¿¡æ¯æ¥å? */
export interface LiveStreamStats {
  totalStreams: number;  // æ€»æµæ•?  onlineStreams: number; // åœ¨çº¿æµæ•°
  offlineStreams: number; // ç¦»çº¿æµæ•°
  averageResponseTime: number; // å¹³å‡å“åº”æ—¶é—´
  lastCheckTime: number; // æœ€åæ£€æŸ¥æ—¶é—?}

/**
 * ç›´æ’­æºæ›´æ–°ä¿¡æ¯æ¥å? */
export interface LiveStreamUpdateInfo {
  channelId: string;     // é¢‘é“ID
  channelName: string;   // é¢‘é“åç§°
  oldStreams: LiveStream[]; // æ—§æµåˆ—è¡¨
  newStreams: LiveStream[]; // æ–°æµåˆ—è¡¨
  updateTime: number;    // æ›´æ–°æ—¶é—´
  sourceKey: string;     // æ•°æ®æºæ ‡è¯?}

/**
 * ç›´æ’­é”™è¯¯æŠ¥å‘Šæ¥å£
 */
export interface LiveErrorReport {
  channelId: string;     // é¢‘é“ID
  channelName: string;   // é¢‘é“åç§°
  streamId?: string;     // æµID
  errorType: string;     // é”™è¯¯ç±»å‹
  errorMessage: string;  // é”™è¯¯ä¿¡æ¯
  timestamp: number;     // é”™è¯¯å‘ç”Ÿæ—¶é—´
  deviceInfo?: string;   // è®¾å¤‡ä¿¡æ¯
  appVersion?: string;   // åº”ç”¨ç‰ˆæœ¬
