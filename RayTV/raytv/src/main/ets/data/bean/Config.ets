// Config.ets - é…ç½®ä¿¡æ¯æ•°æ®æ¨¡å‹
// å®šä¹‰åº”ç”¨å…¨å±€é…ç½®çš„æ•°æ®ç»“æ?
/**
 * æ’­æ”¾å™¨é…ç½®æ¥å? */
export interface PlayerConfig {
  defaultPlayer: 'system' | 'custom'; // é»˜è®¤æ’­æ”¾å™?  enableHardwareDecode: boolean;     // å¯ç”¨ç¡¬ä»¶è§£ç 
  autoContinuePlay: boolean;         // è‡ªåŠ¨ç»­æ’­
  rememberPosition: boolean;         // è®°ä½æ’­æ”¾ä½ç½®
  speedList: number[];               // æ’­æ”¾é€Ÿåº¦åˆ—è¡¨
  defaultSpeed: number;              // é»˜è®¤æ’­æ”¾é€Ÿåº¦
  enableHDR: boolean;                // å¯ç”¨HDR
  enableDolby: boolean;              // å¯ç”¨æœæ¯”éŸ³æ•ˆ
  autoPlayNext: boolean;             // è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é›?  defaultResolution?: string;        // é»˜è®¤åˆ†è¾¨ç?  aspectRatio: 'auto' | '16:9' | '4:3' | 'custom'; // ç”»é¢æ¯”ä¾‹
  subtitlesEnabled: boolean;         // å¯ç”¨å­—å¹•
  defaultSubtitleLanguage?: string;  // é»˜è®¤å­—å¹•è¯­è¨€
  defaultAudioTrack?: string;        // é»˜è®¤éŸ³è½¨
  backgroundPlay: boolean;           // åå°æ’­æ”¾
  playMode: 'single' | 'loop' | 'shuffle'; // æ’­æ”¾æ¨¡å¼
  networkBufferSize?: number;        // ç½‘ç»œç¼“å†²å¤§å°ï¼ˆMBï¼?  localBufferSize?: number;          // æœ¬åœ°ç¼“å†²å¤§å°ï¼ˆMBï¼?  seekStepForward: number;           // å¿«è¿›æ­¥é•¿ï¼ˆç§’ï¼?  seekStepBackward: number;          // å¿«é€€æ­¥é•¿ï¼ˆç§’ï¼?}

/**
 * æ˜¾ç¤ºé…ç½®æ¥å£
 */
export interface DisplayConfig {
  theme: 'light' | 'dark' | 'system'; // ä¸»é¢˜
  fontSize: number;                  // å­—ä½“å¤§å°
  autoFullScreen: boolean;           // è‡ªåŠ¨å…¨å±
  enableGestures: boolean;           // å¯ç”¨æ‰‹åŠ¿
  animationEnabled: boolean;         // å¯ç”¨åŠ¨ç”»
  transitionSpeed: 'slow' | 'normal' | 'fast'; // è¿‡æ¸¡é€Ÿåº¦
  showFPS: boolean;                  // æ˜¾ç¤ºFPS
  showNetworkSpeed: boolean;         // æ˜¾ç¤ºç½‘é€?  showTimeCode: boolean;             // æ˜¾ç¤ºæ—¶é—´ç ?  maxColumns: number;                // æœ€å¤§åˆ—æ•?  posterAspectRatio: 'auto' | '2:3' | '3:4' | '16:9'; // æµ·æŠ¥æ¯”ä¾‹
  hideNavOnPlay: boolean;            // æ’­æ”¾æ—¶éšè—å¯¼èˆªæ 
  screenSaverDelay?: number;         // å±å¹•ä¿æŠ¤å»¶è¿Ÿï¼ˆåˆ†é’Ÿï¼‰
  colorPrimary?: string;             // ä¸»é¢˜è‰?  colorAccent?: string;              // å¼ºè°ƒè‰?  customStyles?: Map<string, string | number | boolean>;   // è‡ªå®šä¹‰æ ·å¼?  tvMode: boolean;                   // TVæ¨¡å¼
  tabletMode: boolean;               // å¹³æ¿æ¨¡å¼
  phoneMode: boolean;                // æ‰‹æœºæ¨¡å¼
}

/**
 * ç½‘ç»œé…ç½®æ¥å£
 */
export interface NetworkConfig {
  timeout: number;                   // è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼?  retryCount: number;                // é‡è¯•æ¬¡æ•°
  enableCache: boolean;              // å¯ç”¨ç¼“å­˜
  cacheSize: number;                 // ç¼“å­˜å¤§å°ï¼ˆMBï¼?  maxConcurrentRequests: number;     // æœ€å¤§å¹¶å‘è¯·æ±‚æ•°
  connectionTimeout: number;         // è¿æ¥è¶…æ—¶ï¼ˆç§’ï¼?  readTimeout: number;               // è¯»å–è¶…æ—¶ï¼ˆç§’ï¼?  writeTimeout: number;              // å†™å…¥è¶…æ—¶ï¼ˆç§’ï¼?  enableProxy: boolean;              // å¯ç”¨ä»£ç†
  proxyServer?: string;              // ä»£ç†æœåŠ¡å™?  proxyPort?: number;                // ä»£ç†ç«¯å£
  userAgent?: string;                // è‡ªå®šä¹‰User-Agent
  enableDNSCache: boolean;           // å¯ç”¨DNSç¼“å­˜
  dnsCacheTime?: number;             // DNSç¼“å­˜æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  enableHttp2: boolean;              // å¯ç”¨HTTP/2
  enableCompression: boolean;        // å¯ç”¨å‹ç¼©
  allowInsecureConnections: boolean; // å…è®¸ä¸å®‰å…¨è¿æ?  certificate?: string;              // è‡ªå®šä¹‰è¯ä¹?}

/**
 * å†…å®¹é™åˆ¶é…ç½®æ¥å£
 */
export interface ContentRestrictions {
  enabled: boolean;
  rating?: string;
  password?: string;
}

/**
 * å®‰å…¨é…ç½®æ¥å£
 */
export interface SecurityConfig {
  enableSandbox: boolean;            // å¯ç”¨æ²™ç®±
  allowThirdParty: boolean;          // å…è®¸ç¬¬ä¸‰æ–¹JARåŠ è½½
  dataEncryption: boolean;           // æ•°æ®åŠ å¯†
  requireBiometricAuth: boolean;     // ç”Ÿç‰©è¯†åˆ«è®¤è¯
  appLockEnabled: boolean;           // åº”ç”¨é”?  appLockTimeout?: number;           // åº”ç”¨é”è¶…æ—¶ï¼ˆåˆ†é’Ÿï¼?  autoClearCacheOnExit: boolean;     // é€€å‡ºæ—¶è‡ªåŠ¨æ¸…é™¤ç¼“å­˜
  privateMode: boolean;              // éšç§æ¨¡å¼
  hideSensitiveInfo: boolean;        // éšè—æ•æ„Ÿä¿¡æ¯
  enableAntiCheat: boolean;          // å¯ç”¨åä½œå¼?  safeBrowsingEnabled: boolean;      // å®‰å…¨æµè§ˆ
  contentRestrictions?: ContentRestrictions;
}

/**
 * å¹¿å‘Šå±è”½é…ç½®æ¥å£
 */
export interface AdBlockConfig {
  enabled: boolean;                  // å¯ç”¨å¹¿å‘Šå±è”½
  rules: string[];                   // å±è”½è§„åˆ™
  updateInterval: number;            // æ›´æ–°é—´éš”ï¼ˆå°æ—¶ï¼‰
  blockVideoAds: boolean;            // å±è”½è§†é¢‘å¹¿å‘Š
  blockPopupAds: boolean;            // å±è”½å¼¹çª—å¹¿å‘Š
  customFilters?: string[];          // è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ?  filterLists?: string[];            // è¿‡æ»¤è§„åˆ™åˆ—è¡¨URL
  whitelist?: string[];              // ç™½åå?  lastUpdateTime?: number;           // æœ€åæ›´æ–°æ—¶é—?}

/**
 * é¸¿è’™ç‰¹æœ‰é…ç½®æ¥å£
 */
export interface HarmonyConfig {
  enableVoiceAssistant: boolean;     // å¯ç”¨è¯­éŸ³åŠ©æ‰‹
  enableDeviceFlow: boolean;         // å¯ç”¨è®¾å¤‡æµè½¬
  enableGestureControl: boolean;     // å¯ç”¨æ‰‹åŠ¿æ§åˆ¶
  enableWidget: boolean;             // å¯ç”¨æ¡Œé¢å°ç»„ä»?  enableNotification: boolean;       // å¯ç”¨é€šçŸ¥
  enableAutoStart: boolean;          // å¯ç”¨è‡ªå¯åŠ?  enableBackgroundSync: boolean;     // å¯ç”¨åå°åŒæ­¥
  enableMultiWindow: boolean;        // å¯ç”¨å¤šçª—å?  enableHiAI: boolean;               // å¯ç”¨HiAIåŠ é€?  enableSuperDevice: boolean;        // å¯ç”¨è¶…çº§ç»ˆç«¯
  deviceSharingEnabled: boolean;     // è®¾å¤‡å…±äº«
  notificationChannels?: string[];   // é€šçŸ¥æ¸ é“
  quickActions?: string[];           // å¿«æ·æ“ä½œ
}

/**
 * æœç´¢é…ç½®æ¥å£
 */
export interface SearchConfig {
  enableAutoSuggest: boolean;        // å¯ç”¨è‡ªåŠ¨å»ºè®®
  searchHistoryLimit: number;        // æœç´¢å†å²é™åˆ¶
  enableGlobalSearch: boolean;       // å¯ç”¨å…¨å±€æœç´¢
  searchTimeout: number;             // æœç´¢è¶…æ—¶ï¼ˆç§’ï¼?  searchDelay: number;               // æœç´¢å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
  defaultSearchFilter?: string;      // é»˜è®¤æœç´¢ç­›é€?  searchHighlight: boolean;          // æœç´¢ç»“æœé«˜äº®
  enableSearchAnalytics: boolean;    // å¯ç”¨æœç´¢åˆ†æ
}

/**
 * ä¸‹è½½é…ç½®æ¥å£
 */
export interface DownloadConfig {
  enableDownload: boolean;           // å¯ç”¨ä¸‹è½½
  maxConcurrentDownloads: number;    // æœ€å¤§å¹¶å‘ä¸‹è½½æ•°
  downloadPath?: string;             // ä¸‹è½½è·¯å¾„
  autoDownloadNextEpisode: boolean;  // è‡ªåŠ¨ä¸‹è½½ä¸‹ä¸€é›?  downloadOnWifiOnly: boolean;       // ä»…WiFiä¸‹è½½
  downloadQuality?: string;          // ä¸‹è½½è´¨é‡
  enableDownloadQueue: boolean;      // å¯ç”¨ä¸‹è½½é˜Ÿåˆ—
  downloadTimeout: number;           // ä¸‹è½½è¶…æ—¶ï¼ˆç§’ï¼?  enableBackgroundDownload: boolean; // å¯ç”¨åå°ä¸‹è½½
}

/**
 * äº‘è´¦æˆ·é…ç½®æ¥å? */
export interface CloudAccount {
  type: string;
  username?: string;
  token?: string;
  lastSyncTime?: number;
}

/**
 * åŒæ­¥é…ç½®æ¥å£
 */
export interface SyncConfig {
  enableCloudSync: boolean;          // å¯ç”¨äº‘åŒæ­?  syncInterval: number;              // åŒæ­¥é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
  syncOnWifiOnly: boolean;           // ä»…WiFiåŒæ­¥
  syncHistory: boolean;              // åŒæ­¥å†å²è®°å½•
  syncFavorites: boolean;            // åŒæ­¥æ”¶è—
  syncSettings: boolean;             // åŒæ­¥è®¾ç½®
  autoBackup: boolean;               // è‡ªåŠ¨å¤‡ä»½
  backupInterval?: number;           // å¤‡ä»½é—´éš”ï¼ˆå¤©ï¼?  cloudAccount?: CloudAccount;
}

/**
 * æ—¥å¿—é…ç½®æ¥å£
 */
export interface LogConfig {
  enableLogging: boolean;            // å¯ç”¨æ—¥å¿—
  logLevel: 'debug' | 'info' | 'warn' | 'error'; // æ—¥å¿—çº§åˆ«
  logToFile: boolean;                // è®°å½•åˆ°æ–‡ä»?  maxLogSize?: number;               // æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼?  logRetentionDays?: number;         // æ—¥å¿—ä¿ç•™å¤©æ•°
  enableAnalytics: boolean;          // å¯ç”¨åˆ†æ
  crashReporting: boolean;           // å´©æºƒæŠ¥å‘Š
}

/**
 * åº”ç”¨é…ç½®ä¸»æ¥å? */
export interface AppConfig {
  player: PlayerConfig;              // æ’­æ”¾å™¨é…ç½?  display: DisplayConfig;            // æ˜¾ç¤ºé…ç½®
  network: NetworkConfig;            // ç½‘ç»œé…ç½®
  security: SecurityConfig;          // å®‰å…¨é…ç½®
  adBlock: AdBlockConfig;            // å¹¿å‘Šå±è”½é…ç½®
  harmony: HarmonyConfig;            // é¸¿è’™ç‰¹æœ‰é…ç½®
  search: SearchConfig;              // æœç´¢é…ç½®
  download: DownloadConfig;          // ä¸‹è½½é…ç½®
  sync: SyncConfig;                  // åŒæ­¥é…ç½®
  log: LogConfig;                    // æ—¥å¿—é…ç½®
  version: string;                   // é…ç½®ç‰ˆæœ¬
  lastUpdated: number;               // æœ€åæ›´æ–°æ—¶é—?  migrationVersion?: string;         // è¿ç§»ç‰ˆæœ¬
  customSettings?: Map<string, string | number | boolean>; // è‡ªå®šä¹‰è®¾ç½?}

/**
 * é…ç½®ç‰ˆæœ¬ä¿¡æ¯æ¥å£
 */
export interface ConfigVersion {
  version: string;                   // ç‰ˆæœ¬å?  buildTime: number;                 // æ„å»ºæ—¶é—´
  minAppVersion: string;             // æœ€ä½åº”ç”¨ç‰ˆæœ?  changelog?: string;                // æ›´æ–°æ—¥å¿—
}

/**
 * é…ç½®å˜æ›´è®°å½•æ¥å£
 */
export interface ConfigChange {
  keyPath: string;                   // é…ç½®è·¯å¾„
  oldValue: string | number | boolean | null; // æ—§å€?  newValue: string | number | boolean | null; // æ–°å€?  changedAt: number;                 // å˜æ›´æ—¶é—´
  changedBy: 'user' | 'system' | 'sync'; // å˜æ›´æ¥æº
}

/**
 * é…ç½®é¢„è®¾æ¥å£
 */
export interface ConfigPreset {
  id: string;                        // é¢„è®¾ID
  name: string;                      // é¢„è®¾åç§°
  description?: string;              // æè¿°
  config: Partial<AppConfig>;        // é¢„è®¾é…ç½®
  isDefault?: boolean;               // æ˜¯å¦é»˜è®¤é¢„è®¾
  deviceType?: string;               // é€‚ç”¨è®¾å¤‡ç±»å‹
  tags?: string[];                   // æ ‡ç­¾
}

/**
 * é…ç½®å¯¼å…¥å¯¼å‡ºé€‰é¡¹æ¥å£
 */
export interface ConfigImportExportOptions {
  includeCredentials?: boolean;      // åŒ…å«å‡­è¯
  includeHistory?: boolean;          // åŒ…å«å†å²è®°å½•
  includeFavorites?: boolean;        // åŒ…å«æ”¶è—
  format: 'json' | 'encrypted';      // æ ¼å¼
  password?: string;                 // å¯†ç 
  description?: string;              // æè¿°
}

/**
 * ç«™ç‚¹é…ç½®é›†åˆæ¥å£
 */
export interface SiteCollection {
  sites: SiteInfo[];           // ç«™ç‚¹åˆ—è¡¨
  version: string;             // ç‰ˆæœ¬å?  updatedAt: number;           // æ›´æ–°æ—¶é—´
}

/**
 * ç«™ç‚¹é…ç½®éªŒè¯ç»“æœæ¥å£
 */
export interface SiteValidationResult {
  isValid: boolean;            // æ˜¯å¦æœ‰æ•ˆ
  errors?: string[];           // é”™è¯¯åˆ—è¡¨
  warnings?: string[];         // è­¦å‘Šåˆ—è¡¨
}

/**
 * æµ‹è¯•ç»“æœæ¥å£
 */
export interface TestResult {
  success: boolean;          // æµ‹è¯•æ˜¯å¦æˆåŠŸ
  message?: string;          // æµ‹è¯•æ¶ˆæ¯
  timestamp: number;         // æµ‹è¯•æ—¶é—´
}

/**
 * ç«™ç‚¹ä¿¡æ¯æ¥å£
 */
export interface SiteInfo {
  id: string;                  // ç«™ç‚¹å”¯ä¸€æ ‡è¯†
  key: string;                 // ç«™ç‚¹é”®å
  name: string;                // ç«™ç‚¹åç§°
  logo?: string;               // ç«™ç‚¹Logo
  description?: string;        // ç«™ç‚¹æè¿°
  type: SiteType;              // ç«™ç‚¹ç±»å‹
  status: SiteStatus;          // ç«™ç‚¹çŠ¶æ€?  url: string;                 // ç«™ç‚¹URL
  scriptUrl?: string;          // è„šæœ¬URL
  jarPath?: string;            // JARæ–‡ä»¶è·¯å¾„
  pyPath?: string;             // Pythonè„šæœ¬è·¯å¾„
  requestConfig: RequestConfig; // è¯·æ±‚é…ç½®
  searchRule: SearchRule;      // æœç´¢è§„åˆ™
  detailRule: DetailRule;      // è¯¦æƒ…é¡µè§„åˆ?  playRule: PlayRule;          // æ’­æ”¾è§„åˆ™
  categories?: string[];       // åˆ†ç±»åˆ—è¡¨
  userAgent?: string;          // ç”¨æˆ·ä»£ç†
  referer?: string;            // å¼•ç”¨é¡?  homepage?: string;           // é¦–é¡µURL
  supportedFeatures?: string[]; // æ”¯æŒçš„ç‰¹æ€?  updatedAt: number;           // æ›´æ–°æ—¶é—´
  lastTestResult?: TestResult;
  errorCount: number;          // é”™è¯¯è®¡æ•°
  isFavorite: boolean;         // æ˜¯å¦æ”¶è—
}

/**
 * ç«™ç‚¹ç±»å‹æšä¸¾
 */
export enum SiteType {
  JS = 'JS',
  PY = 'PY',
  JAR = 'JAR'
}

/**
 * ç«™ç‚¹çŠ¶æ€æšä¸? */
export enum SiteStatus {
  ACTIVE = 'ACTIVE',
  INACTIVE = 'INACTIVE',
  ERROR = 'ERROR',
  LOADING = 'LOADING'
}

/**
 * è¯·æ±‚é…ç½®
 */
export interface RequestConfig {
  timeout: number;             // è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼?  retryCount: number;          // é‡è¯•æ¬¡æ•°
  headers: Record<string, string>; // è¯·æ±‚å¤?  userAgent: string;           // User-Agent
  referer?: string;            // Referer
  cookies?: string;            // Cookies
}

/**
 * æœç´¢è§„åˆ™
 */
export interface SearchRule {
  url: string;                 // æœç´¢URL
  keywordField: string;        // å…³é”®è¯å­—æ®µå
  method: string;              // è¯·æ±‚æ–¹æ³•
  dataFormat?: string;         // æ•°æ®æ ¼å¼
}

/**
 * è¯¦æƒ…é¡µè§„åˆ? */
export interface DetailRule {
  urlPattern: string;          // URLæ¨¡å¼
  titleSelector?: string;      // æ ‡é¢˜é€‰æ‹©å™?  coverSelector?: string;      // å°é¢é€‰æ‹©å™?  descSelector?: string;       // æè¿°é€‰æ‹©å™?  playListSelector?: string;   // æ’­æ”¾åˆ—è¡¨é€‰æ‹©å™?}

/**
 * æ’­æ”¾è§„åˆ™
 */
export interface PlayRule {
  urlPattern: string;          // URLæ¨¡å¼
  playUrlExtractor?: string;   // æ’­æ”¾åœ°å€æå–å™?  headers?: Record<string, string>; // æ’­æ”¾è¯·æ±‚å¤?}

/**
 * é…ç½®é”™è¯¯ä¿¡æ¯æ¥å£
 */
export interface ConfigError {
  field: string;
  message: string;
}

/**
 * é…ç½®è­¦å‘Šä¿¡æ¯æ¥å£
 */
export interface ConfigWarning {
  field: string;
  message: string;
}

/**
 * é…ç½®å»ºè®®ä¿¡æ¯æ¥å£
 */
export interface ConfigSuggestion {
  field: string;
  value: string | number | boolean | null;
  reason: string;
}

/**
 * é…ç½®éªŒè¯ç»“æœæ¥å£
 */
export interface ConfigValidationResult {
  valid: boolean;                    // æ˜¯å¦æœ‰æ•ˆ
  errors?: ConfigError[];
  warnings?: ConfigWarning[];
  suggestions?: ConfigSuggestion[];
}
