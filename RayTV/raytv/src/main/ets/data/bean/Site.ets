// Site.ets - ç«™ç‚¹æ•°æ®æ¨¡å‹
// å®šä¹‰çˆ¬è™«ç«™ç‚¹çš„åŸºæœ¬ä¿¡æ¯å’Œé…ç½®ç»“æ„

/**
 * ç«™ç‚¹ç±»å‹æšä¸¾
 */
export enum SiteType {
  VOD = 'vod',          // ç‚¹æ’­ç«™ç‚¹
  LIVE = 'live',        // ç›´æ’­ç«™ç‚¹
  MIXED = 'mixed'       // æ··åˆç«™ç‚¹ï¼ˆåŒæ—¶æ”¯æŒç‚¹æ’­å’Œç›´æ’­ï¼?}

/**
 * ç«™ç‚¹åŠ è½½å™¨ç±»å‹æšä¸? */
export enum LoaderType {
  JAR = 'jar',          // Java JARåŒ?  JS = 'js',            // JavaScriptè„šæœ¬
  PY = 'py',            // Pythonè„šæœ¬
  DART = 'dart',        // Dartè„šæœ¬
  WASM = 'wasm'         // WebAssembly
}

/**
 * ç«™ç‚¹è®¤è¯ä¿¡æ¯æ¥å£
 */
export interface SiteAuth {
  username?: string;    // ç”¨æˆ·å?  password?: string;    // å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
  cookie?: string;      // Cookieä¿¡æ¯
  token?: string;       // è®¤è¯ä»¤ç‰Œ
  expiresAt?: number;   // è¿‡æœŸæ—¶é—´
}

/**
 * ç«™ç‚¹é…ç½®é¡¹æ¥å? */
export interface SiteConfigItem {
  key: string;          // é…ç½®é”?  value: string | number | boolean; // é…ç½®å€?  type: 'string' | 'number' | 'boolean' | 'select' | 'password'; // é…ç½®ç±»å‹
  label?: string;       // æ˜¾ç¤ºæ ‡ç­¾
  description?: string; // æè¿°
  options?: string[];   // é€‰é¡¹åˆ—è¡¨ï¼ˆç”¨äºselectç±»å‹ï¼?  placeholder?: string; // å ä½ç¬?  min?: number;         // æœ€å°å€¼ï¼ˆç”¨äºnumberç±»å‹ï¼?  max?: number;         // æœ€å¤§å€¼ï¼ˆç”¨äºnumberç±»å‹ï¼?  required?: boolean;   // æ˜¯å¦å¿…å¡«
  default?: string | number | boolean;        // é»˜è®¤å€?}

/**
 * ç«™ç‚¹è¯·æ±‚å¤´é…ç½®æ¥å? */
export interface SiteHeaders {
  headers?: Map<string, string>; // é”®å€¼å¯¹å½¢å¼çš„è¯·æ±‚å¤´
}

/**
 * ç«™ç‚¹æœç´¢é…ç½®æ¥å£
 */
export interface SiteSearchConfig {
  enabled: boolean;     // æ˜¯å¦æ”¯æŒæœç´¢
  searchDelay?: number; // æœç´¢å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
  searchLimit?: number; // æœç´¢ç»“æœé™åˆ¶
  supportAdvancedSearch?: boolean; // æ˜¯å¦æ”¯æŒé«˜çº§æœç´¢
  searchFilters?: string[]; // æœç´¢ç­›é€‰æ¡ä»?  searchCategories?: string[]; // æœç´¢åˆ†ç±»
}

/**
 * ç«™ç‚¹ç­›é€‰é…ç½®æ¥å? */
export interface SiteFilterConfig {
  enabled: boolean;     // æ˜¯å¦æ”¯æŒç­›é€?  filterOptions?: Map<string, string[]>; // ç­›é€‰é€‰é¡¹ï¼ˆé”®ä¸ºç­›é€‰åç§°ï¼Œå€¼ä¸ºé€‰é¡¹åˆ—è¡¨ï¼?  sortOptions?: string[]; // æ’åºé€‰é¡¹
}

/**
 * ç«™ç‚¹æ€§èƒ½é…ç½®æ¥å£
 */
export interface SitePerformanceConfig {
  timeout?: number;     // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  retryCount?: number;  // é‡è¯•æ¬¡æ•°
  cacheEnabled?: boolean; // æ˜¯å¦å¯ç”¨ç¼“å­˜
  cacheDuration?: number; // ç¼“å­˜æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  concurrency?: number; // å¹¶å‘è¯·æ±‚æ•?}

/**
 * ç«™ç‚¹ç‰ˆæœ¬ä¿¡æ¯æ¥å£
 */
export interface SiteVersion {
  version: string;      // ç‰ˆæœ¬å?  buildTime: number;    // æ„å»ºæ—¶é—´
  author?: string;      // ä½œè€?  changelog?: string;   // æ›´æ–°æ—¥å¿—
  updateUrl?: string;   // æ›´æ–°åœ°å€
  compatibleVersion?: string; // å…¼å®¹ç‰ˆæœ¬
}

/**
 * ç«™ç‚¹ç»Ÿè®¡ä¿¡æ¯æ¥å£
 */
export interface SiteStats {
  queryCount: number;   // æŸ¥è¯¢æ¬¡æ•°
  errorCount: number;   // é”™è¯¯æ¬¡æ•°
  avgResponseTime: number; // å¹³å‡å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  lastQueryTime?: number; // æœ€åæŸ¥è¯¢æ—¶é—?  lastErrorTime?: number; // æœ€åé”™è¯¯æ—¶é—?  lastErrorMessage?: string; // æœ€åé”™è¯¯ä¿¡æ?}

/**
 * ç«™ç‚¹ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æ¥å? */
export interface SiteLifecycle {
  initialized: boolean; // æ˜¯å¦å·²åˆå§‹åŒ–
  loading: boolean;     // æ˜¯å¦åŠ è½½ä¸?  error: boolean;       // æ˜¯å¦å‡ºé”™
  errorMessage?: string; // é”™è¯¯ä¿¡æ¯
  initializedAt?: number; // åˆå§‹åŒ–æ—¶é—?  lastActivityAt?: number; // æœ€åæ´»åŠ¨æ—¶é—?}

/**
 * ç«™ç‚¹æ•°æ®æ¨¡å‹
 */
export interface Site {
  key: string;          // ç«™ç‚¹å”¯ä¸€æ ‡è¯†
  name: string;         // ç«™ç‚¹åç§°
  type: SiteType;       // ç«™ç‚¹ç±»å‹
  loaderType: LoaderType; // åŠ è½½å™¨ç±»å?  api: string;          // ç«™ç‚¹APIåœ°å€æˆ–è„šæœ¬è·¯å¾?  logo?: string;        // ç«™ç‚¹Logo URL
  description?: string; // ç«™ç‚¹æè¿°
  siteAuth?: SiteAuth;  // è®¤è¯ä¿¡æ¯
  headers?: SiteHeaders; // è¯·æ±‚å¤´é…ç½?  config?: Map<string, string | number | boolean>; // ç«™ç‚¹é…ç½®
  configItems?: SiteConfigItem[]; // å¯é…ç½®é¡¹å®šä¹‰
  searchConfig: SiteSearchConfig; // æœç´¢é…ç½®
  filterConfig: SiteFilterConfig; // ç­›é€‰é…ç½?  performanceConfig: SitePerformanceConfig; // æ€§èƒ½é…ç½®
  version?: SiteVersion; // ç‰ˆæœ¬ä¿¡æ¯
  stats: SiteStats;     // ç»Ÿè®¡ä¿¡æ¯
  lifecycle: SiteLifecycle; // ç”Ÿå‘½å‘¨æœŸçŠ¶æ€?  enabled: boolean;     // æ˜¯å¦å¯ç”¨
  order: number;        // æ’åºæƒé‡
  group?: string;       // æ‰€å±åˆ†ç»?  tags?: string[];      // æ ‡ç­¾
  customCode?: string;  // è‡ªå®šä¹‰ä»£ç ?  sandboxEnabled?: boolean; // æ˜¯å¦å¯ç”¨æ²™ç®±
  allowThirdParty?: boolean; // æ˜¯å¦å…è®¸ç¬¬ä¸‰æ–¹è°ƒç”?  createdAt: number;    // åˆ›å»ºæ—¶é—´
  updatedAt: number;    // æ›´æ–°æ—¶é—´
  lastUsedAt?: number;  // æœ€åä½¿ç”¨æ—¶é—?  userAgent?: string;   // è‡ªå®šä¹‰User-Agent
  referer?: string;     // è‡ªå®šä¹‰Referer
  proxy?: string;       // ä»£ç†é…ç½®
  encoding?: string;    // ç¼–ç æ ¼å¼
  charset?: string;     // å­—ç¬¦é›?  certificate?: string; // è¯ä¹¦é…ç½®
}

/**
 * ç«™ç‚¹åˆ†ç»„æ¥å£
 */
export interface SiteGroup {
  id: string;           // åˆ†ç»„ID
  name: string;         // åˆ†ç»„åç§°
  siteKeys: string[];   // ç«™ç‚¹æ ‡è¯†åˆ—è¡¨
  icon?: string;        // åˆ†ç»„å›¾æ ‡
  color?: string;       // åˆ†ç»„é¢œè‰²
  description?: string; // åˆ†ç»„æè¿°
  order: number;        // æ’åºæƒé‡
  createdAt: number;    // åˆ›å»ºæ—¶é—´
  updatedAt: number;    // æ›´æ–°æ—¶é—´
}

/**
 * ç«™ç‚¹åˆ—è¡¨å“åº”æ¥å£
 */
export interface SiteListResponse {
  sites: Site[];        // ç«™ç‚¹åˆ—è¡¨
  groups?: SiteGroup[]; // åˆ†ç»„åˆ—è¡¨
  total: number;        // æ€»æ•°
  enabledCount: number; // å¯ç”¨çš„ç«™ç‚¹æ•°é‡?  disabledCount: number; // ç¦ç”¨çš„ç«™ç‚¹æ•°é‡?}

/**
 * ç«™ç‚¹æµ‹è¯•ç»“æœæ¥å£
 */
export interface SiteTestResult {
  siteKey: string;      // ç«™ç‚¹æ ‡è¯†
  status: 'success' | 'failed' | 'timeout'; // æµ‹è¯•çŠ¶æ€?  responseTime: number; // å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  errorMessage?: string; // é”™è¯¯ä¿¡æ¯
  testTime: number;     // æµ‹è¯•æ—¶é—´
  details?: string | number | boolean | null;        // æµ‹è¯•è¯¦æƒ…
}

/**
 * ç«™ç‚¹æ›´æ–°ä¿¡æ¯æ¥å£
 */
export interface SiteUpdateInfo {
  siteKey: string;      // ç«™ç‚¹æ ‡è¯†
  currentVersion: string; // å½“å‰ç‰ˆæœ¬
  latestVersion: string; // æœ€æ–°ç‰ˆæœ?  updateUrl: string;    // æ›´æ–°åœ°å€
  changelog: string;    // æ›´æ–°æ—¥å¿—
  isAvailable: boolean; // æ˜¯å¦æœ‰æ›´æ–?  size?: number;        // æ›´æ–°åŒ…å¤§å°?  buildTime?: number;   // æ„å»ºæ—¶é—´
  author?: string;      // ä½œè€?}

/**
 * ç«™ç‚¹æœç´¢è¯·æ±‚æ¥å£
 */
export interface SiteSearchRequest {
  keyword: string;      // æœç´¢å…³é”®è¯?  siteKey?: string;     // ç«™ç‚¹æ ‡è¯†
  page?: number;        // é¡µç 
  pageSize?: number;    // æ¯é¡µæ•°é‡
  filters?: Map<string, string>; // ç­›é€‰æ¡ä»?  sortBy?: string;      // æ’åºå­—æ®µ
  sortOrder?: 'asc' | 'desc'; // æ’åºé¡ºåº
  type?: 'all' | 'movie' | 'tv' | 'anime' | 'variety'; // å†…å®¹ç±»å‹
}

/**
 * ç«™ç‚¹é”™è¯¯æŠ¥å‘Šæ¥å£
 */
export interface SiteErrorReport {
  siteKey: string;      // ç«™ç‚¹æ ‡è¯†
  errorType: string;    // é”™è¯¯ç±»å‹
  errorMessage: string; // é”™è¯¯ä¿¡æ¯
  stackTrace?: string;  // å †æ ˆè·Ÿè¸ª
  requestInfo?: string | number | boolean | null;    // è¯·æ±‚ä¿¡æ¯
  timestamp: number;    // å‘ç”Ÿæ—¶é—´
  deviceInfo?: string;  // è®¾å¤‡ä¿¡æ¯
  appVersion?: string;  // åº”ç”¨ç‰ˆæœ¬
}

/**
 * ç«™ç‚¹å¯¼å…¥å¯¼å‡ºé…ç½®æ¥å£
 */
export interface SiteImportExportConfig {
  includeCredentials?: boolean; // æ˜¯å¦åŒ…å«å‡­è¯ä¿¡æ¯
  includeStats?: boolean;      // æ˜¯å¦åŒ…å«ç»Ÿè®¡ä¿¡æ¯
  includeCustomConfig?: boolean; // æ˜¯å¦åŒ…å«è‡ªå®šä¹‰é…ç½?  format?: 'json' | 'zip' | 'raytv'; // å¯¼å‡ºæ ¼å¼
  password?: string;           // åŠ å¯†å¯†ç 
  description?: string;        // æè¿°ä¿¡æ¯
}

/**
 * ç«™ç‚¹æ¨¡æ¿æ¥å£
 */
export interface SiteTemplate {
  id: string;           // æ¨¡æ¿ID
  name: string;         // æ¨¡æ¿åç§°
  loaderType: LoaderType; // åŠ è½½å™¨ç±»å?  configTemplate: string | number | boolean | null;  // é…ç½®æ¨¡æ¿
  description?: string; // æè¿°
  tags?: string[];      // æ ‡ç­¾
  author?: string;      // ä½œè€?  version?: string;     // ç‰ˆæœ¬å?}
