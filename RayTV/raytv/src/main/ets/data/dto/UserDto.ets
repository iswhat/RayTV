// UserDto - ç”¨æˆ·ç›¸å…³æ•°æ®ä¼ è¾“å¯¹è±¡
import { UserRole } from '../model/User';
import ApiResponse from './ApiResponse';

/**
 * ç™»å½•è¯·æ±‚å‚æ•°æ¥å£
 */
export interface LoginRequest {
  username: string;                 // ç”¨æˆ·å?é‚®ç®±/æ‰‹æœºå?  password: string;                 // å¯†ç 
  rememberMe?: boolean;             // æ˜¯å¦è®°ä½ç™»å½•çŠ¶æ€?  deviceInfo?: DeviceInfo;          // è®¾å¤‡ä¿¡æ¯
  captcha?: string;                 // éªŒè¯ç ?  captchaKey?: string;              // éªŒè¯ç å¯†é’?  loginType?: 'normal' | 'sso' | 'third_party'; // ç™»å½•ç±»å‹
}

/**
 * æ³¨å†Œè¯·æ±‚å‚æ•°æ¥å£
 */
export interface RegisterRequest {
  username: string;                 // ç”¨æˆ·å?  email?: string;                   // é‚®ç®±ï¼ˆå¯é€‰ï¼‰
  phone?: string;                   // æ‰‹æœºå·ï¼ˆå¯é€‰ï¼‰
  password: string;                 // å¯†ç 
  confirmPassword: string;          // ç¡®è®¤å¯†ç 
  nickname?: string;                // æ˜µç§°ï¼ˆå¯é€‰ï¼‰
  avatarUrl?: string;               // å¤´åƒURLï¼ˆå¯é€‰ï¼‰
  captcha?: string;                 // éªŒè¯ç ?  captchaKey?: string;              // éªŒè¯ç å¯†é’?  agreeTerms: boolean;              // æ˜¯å¦åŒæ„ç”¨æˆ·åè®®
  referralCode?: string;            // æ¨èç ï¼ˆå¯é€‰ï¼‰
}

/**
 * å¿˜è®°å¯†ç è¯·æ±‚å‚æ•°æ¥å£
 */
export interface ForgotPasswordRequest {
  email?: string;                   // é‚®ç®±ï¼ˆå¯é€‰ï¼‰
  phone?: string;                   // æ‰‹æœºå·ï¼ˆå¯é€‰ï¼‰
  captcha?: string;                 // éªŒè¯ç ?  captchaKey?: string;              // éªŒè¯ç å¯†é’?  newPassword: string;              // æ–°å¯†ç ?  confirmNewPassword: string;       // ç¡®è®¤æ–°å¯†ç ?}

/**
 * é‡ç½®å¯†ç è¯·æ±‚å‚æ•°æ¥å£
 */
export interface ResetPasswordRequest {
  oldPassword: string;              // æ—§å¯†ç ?  newPassword: string;              // æ–°å¯†ç ?  confirmNewPassword: string;       // ç¡®è®¤æ–°å¯†ç ?}

/**
 * éªŒè¯ç è¯·æ±‚å‚æ•°æ¥å? */
export interface CaptchaRequest {
  type: 'login' | 'register' | 'forgot' | 'change_email' | 'change_phone'; // éªŒè¯ç ç±»å?  email?: string;                   // é‚®ç®±ï¼ˆå¯é€‰ï¼‰
  phone?: string;                   // æ‰‹æœºå·ï¼ˆå¯é€‰ï¼‰
  width?: number;                   // å›¾ç‰‡å®½åº¦ï¼ˆå¯é€‰ï¼‰
  height?: number;                  // å›¾ç‰‡é«˜åº¦ï¼ˆå¯é€‰ï¼‰
}

/**
 * è®¾å¤‡ä¿¡æ¯æ¥å£
 */
export interface DeviceInfo {
  deviceId: string;                 // è®¾å¤‡ID
  deviceName: string;               // è®¾å¤‡åç§°
  deviceType: 'phone' | 'tablet' | 'tv' | 'computer' | 'other'; // è®¾å¤‡ç±»å‹
  os: string;                       // æ“ä½œç³»ç»Ÿ
  osVersion: string;                // æ“ä½œç³»ç»Ÿç‰ˆæœ¬
  appVersion: string;               // åº”ç”¨ç‰ˆæœ¬
  screenWidth?: number;             // å±å¹•å®½åº¦
  screenHeight?: number;            // å±å¹•é«˜åº¦
  ipAddress?: string;               // IPåœ°å€
  userAgent?: string;               // ç”¨æˆ·ä»£ç†
}

/**
 * è®¤è¯å“åº”æ•°æ®æ¥å£
 */
export interface AuthResponseData {
  token: string;                    // JWTæˆ–å…¶ä»–è®¤è¯ä»¤ç‰?  refreshToken?: string;            // åˆ·æ–°ä»¤ç‰Œ
  expiresIn: number;                // ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼?  tokenType: string;                // ä»¤ç‰Œç±»å‹
  user: UserInfo;                   // ç”¨æˆ·ä¿¡æ¯
  permissions?: string[];           // æƒé™åˆ—è¡¨
  deviceId?: string;                // è®¾å¤‡ID
  loginAt: number;                  // ç™»å½•æ—¶é—´æˆ?  expiresAt: number;                // ä»¤ç‰Œè¿‡æœŸæ—¶é—´æˆ?}

/**
 * ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ¥å£
 */
export interface UserInfo {
  id: string;                       // ç”¨æˆ·ID
  username: string;                 // ç”¨æˆ·å?  nickname?: string;                // æ˜µç§°
  avatarUrl?: string;               // å¤´åƒURL
  email?: string;                   // é‚®ç®±
  phone?: string;                   // æ‰‹æœºå?  role: UserRole;                   // ç”¨æˆ·è§’è‰²
  gender?: 'male' | 'female' | 'other'; // æ€§åˆ«
  birthDate?: string;               // å‡ºç”Ÿæ—¥æœŸ
  country?: string;                 // å›½å®¶/åœ°åŒº
  language?: string;                // è¯­è¨€åå¥½
  bio?: string;                     // ä¸ªäººç®€ä»?  isVerified: boolean;              // æ˜¯å¦å·²éªŒè¯?  isActive: boolean;                // æ˜¯å¦æ¿€æ´?  isOnline?: boolean;               // æ˜¯å¦åœ¨çº¿
  createdAt: number;                // åˆ›å»ºæ—¶é—´æˆ?  updatedAt: number;                // æ›´æ–°æ—¶é—´æˆ?  lastLoginAt?: number;             // æœ€åç™»å½•æ—¶é—´æˆ³
  totalWatchTime?: number;          // æ€»è§‚çœ‹æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼?  favoriteCount?: number;           // æ”¶è—æ•°é‡
  historyCount?: number;            // è§‚çœ‹å†å²æ•°é‡
  subscriptionStatus?: 'free' | 'premium' | 'expired'; // è®¢é˜…çŠ¶æ€?  subscriptionExpiresAt?: number;   // è®¢é˜…è¿‡æœŸæ—¶é—´æˆ?}

/**
 * ç”¨æˆ·åå¥½è®¾ç½®æ¥å£
 */
export interface UserPreferences {
  theme: 'light' | 'dark' | 'auto'; // ä¸»é¢˜è®¾ç½®
  language: string;                 // è¯­è¨€è®¾ç½®
  subtitles: SubtitlePreferences;   // å­—å¹•è®¾ç½®
  playback: PlaybackPreferences;    // æ’­æ”¾è®¾ç½®
  notification: NotificationPreferences; // é€šçŸ¥è®¾ç½®
  privacy: PrivacyPreferences;      // éšç§è®¾ç½®
  interface: InterfacePreferences;  // ç•Œé¢è®¾ç½®
  parental: ParentalControlPreferences; // å®¶é•¿æ§åˆ¶è®¾ç½®
  recommendations: RecommendationPreferences; // æ¨èè®¾ç½®
  custom?: Record<string, unknown>;     // è‡ªå®šä¹‰åå¥½è®¾ç½?  updatedAt: number;                // æ›´æ–°æ—¶é—´æˆ?}

/**
 * å­—å¹•åå¥½è®¾ç½®æ¥å£
 */
export interface SubtitlePreferences {
  enabled: boolean;                 // æ˜¯å¦å¯ç”¨å­—å¹•
  language: string;                 // é¦–é€‰å­—å¹•è¯­è¨€
  size: 'small' | 'medium' | 'large' | number; // å­—å¹•å¤§å°
  color: string;                    // å­—å¹•é¢œè‰²
  backgroundColor?: string;         // èƒŒæ™¯é¢œè‰²
  font: string;                     // å­—ä½“
  bold: boolean;                    // æ˜¯å¦ç²—ä½“
  position: 'bottom' | 'top' | 'custom'; // å­—å¹•ä½ç½®
  delay?: number;                   // å­—å¹•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
}

/**
 * æ’­æ”¾åå¥½è®¾ç½®æ¥å£
 */
export interface PlaybackPreferences {
  autoPlay: boolean;                // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾
  autoNext: boolean;                // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é›?  defaultQuality: string;           // é»˜è®¤ç”»è´¨
  bandwidthSaving: boolean;         // æ˜¯å¦èŠ‚çœå¸¦å®½
  rememberPosition: boolean;        // æ˜¯å¦è®°ä½æ’­æ”¾ä½ç½®
  volume: number;                   // é»˜è®¤éŸ³é‡
  muted: boolean;                   // æ˜¯å¦é»˜è®¤é™éŸ³
  maxResolution?: string;           // æœ€å¤§åˆ†è¾¨ç‡é™åˆ¶
  playbackSpeed: number;            // é»˜è®¤æ’­æ”¾é€Ÿåº¦
}

/**
 * é€šçŸ¥åå¥½è®¾ç½®æ¥å£
 */
export interface NotificationPreferences {
  enabled: boolean;                 // æ˜¯å¦å¯ç”¨é€šçŸ¥
  newReleases: boolean;             // æ–°å†…å®¹é€šçŸ¥
  recommendations: boolean;         // æ¨èé€šçŸ¥
  updates: boolean;                 // æ›´æ–°é€šçŸ¥
  promotions: boolean;              // ä¿ƒé”€é€šçŸ¥
  email: boolean;                   // é‚®ä»¶é€šçŸ¥
  push: boolean;                    // æ¨é€é€šçŸ¥
  frequency: 'immediate' | 'daily' | 'weekly'; // é€šçŸ¥é¢‘ç‡
  categories?: string[];            // å…³æ³¨çš„åˆ†ç±?}

/**
 * éšç§åå¥½è®¾ç½®æ¥å£
 */
export interface PrivacyPreferences {
  profileVisible: boolean;          // ä¸ªäººèµ„æ–™æ˜¯å¦å¯è§
  watchHistoryVisible: boolean;     // è§‚çœ‹å†å²æ˜¯å¦å¯è§
  favoritesVisible: boolean;        // æ”¶è—æ˜¯å¦å¯è§
  shareData: boolean;               // æ˜¯å¦å…è®¸åˆ†äº«æ•°æ®ç”¨äºæ”¹è¿›æœåŠ¡
  targetedAds: boolean;             // æ˜¯å¦å…è®¸å®šå‘å¹¿å‘Š
  dataRetention?: number;           // æ•°æ®ä¿ç•™æœŸé™ï¼ˆå¤©ï¼?  analytics: boolean;               // æ˜¯å¦å¯ç”¨åˆ†æ
}

/**
 * ç•Œé¢åå¥½è®¾ç½®æ¥å£
 */
export interface InterfacePreferences {
  layout: 'grid' | 'list';          // å†…å®¹å¸ƒå±€
  gridColumns: number;              // ç½‘æ ¼åˆ—æ•°
  showRatings: boolean;             // æ˜¯å¦æ˜¾ç¤ºè¯„åˆ†
  showDescriptions: boolean;        // æ˜¯å¦æ˜¾ç¤ºæè¿°
  posterSize: 'small' | 'medium' | 'large'; // æµ·æŠ¥å¤§å°
  autoplayTrailers: boolean;        // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾é¢„å‘Šç‰?  defaultTab: string;               // é»˜è®¤æ ‡ç­¾é¡?  displayMode: 'poster' | 'backdrop' | 'both'; // æ˜¾ç¤ºæ¨¡å¼
}

/**
 * å®¶é•¿æ§åˆ¶åå¥½è®¾ç½®æ¥å£
 */
export interface ParentalControlPreferences {
  enabled: boolean;                 // æ˜¯å¦å¯ç”¨å®¶é•¿æ§åˆ¶
  pin: string;                      // PINç ï¼ˆåŠ å¯†å­˜å‚¨ï¼?  contentRating: string;            // å†…å®¹åˆ†çº§é™åˆ¶
  hideAdultContent: boolean;        // æ˜¯å¦éšè—æˆäººå†…å®¹
  restrictPurchases: boolean;       // æ˜¯å¦é™åˆ¶è´­ä¹°
  viewingTimeLimit?: number;        // æ¯æ—¥è§‚çœ‹æ—¶é—´é™åˆ¶ï¼ˆåˆ†é’Ÿï¼‰
  allowedCategories?: string[];     // å…è®¸çš„å†…å®¹åˆ†ç±?}

/**
 * æ¨èåå¥½è®¾ç½®æ¥å£
 */
export interface RecommendationPreferences {
  enabled: boolean;                 // æ˜¯å¦å¯ç”¨æ¨è
  preferredGenres?: string[];       // åå¥½çš„ç±»å?  preferredDirectors?: string[];    // åå¥½çš„å¯¼æ¼?  preferredActors?: string[];       // åå¥½çš„æ¼”å‘?  dislikedGenres?: string[];        // ä¸å–œæ¬¢çš„ç±»å‹
  excludeWatched: boolean;          // æ˜¯å¦æ’é™¤å·²è§‚çœ‹å†…å®?  refreshFrequency?: number;        // æ¨èåˆ·æ–°é¢‘ç‡ï¼ˆå°æ—¶ï¼‰
}

/**
 * ç”¨æˆ·ä¸ªäººèµ„æ–™æ›´æ–°è¯·æ±‚å‚æ•°æ¥å£
 */
export interface UpdateProfileRequest {
  nickname?: string;                // æ˜µç§°
  avatarUrl?: string;               // å¤´åƒURL
  gender?: 'male' | 'female' | 'other'; // æ€§åˆ«
  birthDate?: string;               // å‡ºç”Ÿæ—¥æœŸ
  country?: string;                 // å›½å®¶/åœ°åŒº
  language?: string;                // è¯­è¨€åå¥½
  bio?: string;                     // ä¸ªäººç®€ä»?}

/**
 * æ›´æ–°åå¥½è®¾ç½®è¯·æ±‚å‚æ•°æ¥å£
 */
export interface UpdatePreferencesRequest {
  theme?: 'light' | 'dark' | 'auto'; // ä¸»é¢˜è®¾ç½®
  language?: string;                // è¯­è¨€è®¾ç½®
  subtitles?: Partial<SubtitlePreferences>; // å­—å¹•è®¾ç½®
  playback?: Partial<PlaybackPreferences>; // æ’­æ”¾è®¾ç½®
  notification?: Partial<NotificationPreferences>; // é€šçŸ¥è®¾ç½®
  privacy?: Partial<PrivacyPreferences>; // éšç§è®¾ç½®
  interface?: Partial<InterfacePreferences>; // ç•Œé¢è®¾ç½®
  parental?: Partial<ParentalControlPreferences>; // å®¶é•¿æ§åˆ¶è®¾ç½®
  recommendations?: Partial<RecommendationPreferences>; // æ¨èè®¾ç½®
  custom?: Record<string, unknown>;     // è‡ªå®šä¹‰åå¥½è®¾ç½?}

/**
 * åˆ·æ–°ä»¤ç‰Œè¯·æ±‚å‚æ•°æ¥å£
 */
export interface RefreshTokenRequest {
  refreshToken: string;             // åˆ·æ–°ä»¤ç‰Œ
  deviceId?: string;                // è®¾å¤‡ID
}

/**
 * æ³¨é”€è¯·æ±‚å‚æ•°æ¥å£
 */
export interface LogoutRequest {
  token?: string;                   // å½“å‰ä»¤ç‰Œ
  deviceId?: string;                // è®¾å¤‡ID
  allDevices?: boolean;             // æ˜¯å¦æ³¨é”€æ‰€æœ‰è®¾å¤?}

/**
 * è®¾å¤‡ä¼šè¯æ¥å£
 */
export interface DeviceSession {
  id: string;                       // ä¼šè¯ID
  deviceId: string;                 // è®¾å¤‡ID
  deviceName: string;               // è®¾å¤‡åç§°
  deviceType: string;               // è®¾å¤‡ç±»å‹
  os: string;                       // æ“ä½œç³»ç»Ÿ
  loginAt: number;                  // ç™»å½•æ—¶é—´
  lastActiveAt: number;             // æœ€åæ´»è·ƒæ—¶é—?  ipAddress?: string;               // IPåœ°å€
  location?: string;                // ä½ç½®ä¿¡æ¯
  isCurrent: boolean;               // æ˜¯å¦å½“å‰è®¾å¤‡
}

/**
 * è®¾å¤‡ä¼šè¯åˆ—è¡¨å“åº”æ¥å£
 */
export interface DeviceSessionsResponseData {
  sessions: DeviceSession[];        // è®¾å¤‡ä¼šè¯åˆ—è¡¨
  total: number;                    // æ€»æ•°
  currentSessionId?: string;        // å½“å‰ä¼šè¯ID
}

/**
 * ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯æ¥å£
 */
export interface UserStats {
  totalWatchTime: number;           // æ€»è§‚çœ‹æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼?  favoriteCount: number;            // æ”¶è—æ•°é‡
  historyCount: number;             // è§‚çœ‹å†å²æ•°é‡
  watchedMovies: number;            // å·²è§‚çœ‹ç”µå½±æ•°é‡?  watchedEpisodes: number;          // å·²è§‚çœ‹å‰§é›†æ•°é‡?  averageRating?: number;           // å¹³å‡è¯„åˆ†
  watchProgress?: number;           // æ€»è§‚çœ‹è¿›åº?  genreDistribution?: Record<string, number>; // ç±»å‹åˆ†å¸ƒ
  activeDays?: number;              // æ´»è·ƒå¤©æ•°
  currentStreak?: number;           // å½“å‰è¿ç»­æ´»è·ƒå¤©æ•°
  longestStreak?: number;           // æœ€é•¿è¿ç»­æ´»è·ƒå¤©æ•?}

/**
 * è®¤è¯APIå“åº”
 */
export type AuthApiResponse = ApiResponse<AuthResponseData>;

/**
 * ç”¨æˆ·ä¿¡æ¯APIå“åº”
 */
export type UserInfoApiResponse = ApiResponse<UserInfo>;

/**
 * ç”¨æˆ·åå¥½è®¾ç½®APIå“åº”
 */
export type UserPreferencesApiResponse = ApiResponse<UserPreferences>;

/**
 * è®¾å¤‡ä¼šè¯APIå“åº”
 */
export type DeviceSessionsApiResponse = ApiResponse<DeviceSessionsResponseData>;

/**
 * ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯APIå“åº”
 */
export type UserStatsApiResponse = ApiResponse<UserStats>;

/**
 * ç”¨æˆ·ç›¸å…³çš„å·¥å…·æ–¹æ³? */
export class UserUtils {
  /**
   * è·å–ç”¨æˆ·æ˜¾ç¤ºåç§°
   */
  static getDisplayName(user: UserInfo): string {
    return user.nickname || user.username || 'ç”¨æˆ·';
  }

  /**
   * è·å–ç”¨æˆ·å¹´é¾„
   */
  static getAge(birthDate?: string): number | null {
    if (!birthDate) {
      return null;
    }
    const birth = new Date(birthDate);
    const today = new Date();
    let age = today.getFullYear() - birth.getFullYear();
    const monthDiff = today.getMonth() - birth.getMonth();
    
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
      age--;
    }
    
    return age >= 0 ? age : null;
  }

  /**
   * éªŒè¯å¯†ç å¼ºåº¦
   */
  static validatePasswordStrength(password: string): {
    isValid: boolean;
    strength: 'weak' | 'medium' | 'strong';
    issues: string[];
  } {
    const issues: string[] = [];
    
    if (password.length < 6) {
      issues.push('å¯†ç é•¿åº¦è‡³å°‘ä¸?ä¸ªå­—ç¬?);
    } else if (password.length > 50) {
      issues.push('å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬?);
    }
    
    const hasLower = /[a-z]/.test(password);
    const hasUpper = /[A-Z]/.test(password);
    const hasNumber = /[0-9]/.test(password);
    const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);
    
    const charTypes = [hasLower, hasUpper, hasNumber, hasSpecial].filter(Boolean).length;
    
    // è®¡ç®—å¯†ç å¼ºåº¦
    let strength: 'weak' | 'medium' | 'strong' = 'weak';
    if (password.length >= 8 && charTypes >= 3) {
      strength = 'strong';
    } else if (password.length >= 6 && charTypes >= 2) {
      strength = 'medium';
    }
    
    return {
      isValid: issues.length === 0 && password.length >= 6,
      strength,
      issues
    };
  }

  /**
   * éªŒè¯é‚®ç®±æ ¼å¼
   */
  static isValidEmail(email: string): boolean {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  /**
   * éªŒè¯æ‰‹æœºå·æ ¼å¼ï¼ˆç®€å•éªŒè¯ï¼Œå®é™…åº”æ ¹æ®å›½å®?åœ°åŒºè°ƒæ•´ï¼?   */
  static isValidPhone(phone: string): boolean {
    // ç®€å•çš„æ‰‹æœºå·éªŒè¯ï¼Œå¯æ ¹æ®éœ€è¦å¢å¼?    const phoneRegex = /^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,4}[-\s.]?[0-9]{1,9}$/;
    return phoneRegex.test(phone);
  }

  /**
   * è·å–è®¢é˜…çŠ¶æ€çš„æ˜¾ç¤ºæ–‡æœ¬
   */
  static getSubscriptionStatusText(status?: 'free' | 'premium' | 'expired'): string {
    const statusMap: Record<string, string> = {
      'free': 'å…è´¹ç”¨æˆ·',
      'premium': 'é«˜çº§ä¼šå‘˜',
      'expired': 'ä¼šå‘˜å·²è¿‡æœ?
    };
    return statusMap[status || 'free'] || 'å…è´¹ç”¨æˆ·';
  }

  /**
   * è·å–è§’è‰²çš„æ˜¾ç¤ºæ–‡æœ?   */
  static getRoleDisplayName(role: UserRole): string {
    const roleMap: Record<UserRole, string> = {
      [UserRole.ADMIN]: 'ç®¡ç†å‘?,
      [UserRole.USER]: 'æ™®é€šç”¨æˆ?,
      [UserRole.VIP]: 'VIPç”¨æˆ·',
      [UserRole.GUEST]: 'è®¿å®¢',
      [UserRole.BANNED]: 'å·²ç¦ç”?,
      [UserRole.SUBSCRIBER]: 'è®¢é˜…ç”¨æˆ·'
    };
    return roleMap[role] || 'æœªçŸ¥è§’è‰²';
  }

  /**
   * æ ¼å¼åŒ–è§‚çœ‹æ—¶é•?   */
  static formatWatchTime(minutes: number): string {
    if (minutes < 60) {
      return `${minutes}åˆ†é’Ÿ`;
    }
    const hours = Math.floor(minutes / 60);
    const mins = minutes % 60;
    if (mins === 0) {
      return `${hours}å°æ—¶`;
    }
    return `${hours}å°æ—¶${mins}åˆ†é’Ÿ`;
  }

  /**
   * åˆ›å»ºé»˜è®¤çš„ç”¨æˆ·åå¥½è®¾ç½?   */
  static createDefaultPreferences(): UserPreferences {
    return {
      theme: 'auto',
      language: 'zh-CN',
      subtitles: {
        enabled: true,
        language: 'zh-CN',
        size: 'medium',
        color: '#FFFFFF',
        backgroundColor: 'rgba(0,0,0,0.5)',
        font: 'Arial',
        bold: false,
        position: 'bottom',
        delay: 0
      },
      playback: {
        autoPlay: true,
        autoNext: true,
        defaultQuality: '1080p',
        bandwidthSaving: false,
        rememberPosition: true,
        volume: 80,
        muted: false,
        playbackSpeed: 1.0
      },
      notification: {
        enabled: true,
        newReleases: true,
        recommendations: true,
        updates: true,
        promotions: false,
        email: true,
        push: true,
        frequency: 'immediate'
      },
      privacy: {
        profileVisible: false,
        watchHistoryVisible: false,
        favoritesVisible: false,
        shareData: true,
        targetedAds: true,
        analytics: true
      },
      interface: {
        layout: 'grid',
        gridColumns: 3,
        showRatings: true,
        showDescriptions: false,
        posterSize: 'medium',
        autoplayTrailers: false,
        defaultTab: 'home',
        displayMode: 'poster'
      },
      parental: {
        enabled: false,
        pin: '',
        contentRating: 'all',
        hideAdultContent: true,
        restrictPurchases: true
      },
      recommendations: {
        enabled: true,
        excludeWatched: true
      },
      updatedAt: Date.now()
    };
  }
}
