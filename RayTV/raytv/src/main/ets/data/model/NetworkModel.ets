// NetworkModel - ç½‘ç»œç›¸å…³æ¨¡å‹å®šä¹‰
// å®šä¹‰ç½‘ç»œè¯·æ±‚å’Œå“åº”ç›¸å…³çš„æ•°æ®ç»“æ„å’Œæšä¸?

/**
 * HTTPè¯·æ±‚æ–¹æ³•æšä¸¾
 */
export enum RequestMethod {
  GET = 'GET',
  POST = 'POST',
  PUT = 'PUT',
  DELETE = 'DELETE',
  PATCH = 'PATCH',
  HEAD = 'HEAD',
  OPTIONS = 'OPTIONS'
}

/**
 * å“åº”ç±»å‹æšä¸¾
 */
export enum ResponseType {
  JSON = 'json',
  TEXT = 'text',
  ARRAY_BUFFER = 'arraybuffer',
  BLOB = 'blob'
}

/**
 * è¯·æ±‚é€‰é¡¹æ¥å£
 */
export interface RequestOptions {
  /**
   * è¯·æ±‚å¤?
   */
  headers?: Map<string, string>;
  
  /**
   * è¯·æ±‚æ•°æ®
   */
  data?: Record<string, string | number | boolean | null>;
  
  /**
   * URLæŸ¥è¯¢å‚æ•°
   */
  params?: Record<string, unknown>;
  
  /**
   * è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
   */
  timeout?: number;
  
  /**
   * å“åº”ç±»å‹
   */
  responseType?: ResponseType;
  
  /**
   * æ˜¯å¦ä½¿ç”¨ç¼“å­˜
   */
  useCache?: boolean;
  
  /**
   * ç¼“å­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
   */
  cacheTime?: number;
  
  /**
   * æ˜¯å¦å…è®¸é‡å®šå?
   */
  allowRedirects?: boolean;
  
  /**
   * æ˜¯å¦å‘é€å‡­è¯?
   */
  withCredentials?: boolean;
  
  /**
   * è¯·æ±‚ä¼˜å…ˆçº?
   */
  priority?: 'low' | 'normal' | 'high';
  
  /**
   * é‡è¯•æ¬¡æ•°
   */
  retryCount?: number;
  
  /**
   * é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
   */
  retryDelay?: number;
  
  /**
   * è¯·æ±‚æ ‡è®°ï¼ˆç”¨äºå–æ¶ˆè¯·æ±‚ï¼‰
   */
  requestId?: string;
}

/**
 * ç½‘ç»œçŠ¶æ€æšä¸?
 */
export enum NetworkStatus {
  /**
   * æœªè¿æ?
   */
  DISCONNECTED = 'disconnected',
  
  /**
   * å·²è¿æ?
   */
  CONNECTED = 'connected',
  
  /**
   * è¿æ¥ä¸?
   */
  CONNECTING = 'connecting',
  
  /**
   * è¿æ¥é”™è¯¯
   */
  ERROR = 'error'
}

/**
 * ç½‘ç»œç±»å‹æšä¸¾
 */
export enum NetworkType {
  /**
   * æœªçŸ¥ç½‘ç»œ
   */
  UNKNOWN = 'unknown',
  
  /**
   * æœ‰çº¿ç½‘ç»œ
   */
  ETHERNET = 'ethernet',
  
  /**
   * WiFiç½‘ç»œ
   */
  WIFI = 'wifi',
  
  /**
   * ç§»åŠ¨ç½‘ç»œ - 2G
   */
  MOBILE_2G = 'mobile_2g',
  
  /**
   * ç§»åŠ¨ç½‘ç»œ - 3G
   */
  MOBILE_3G = 'mobile_3g',
  
  /**
   * ç§»åŠ¨ç½‘ç»œ - 4G
   */
  MOBILE_4G = 'mobile_4g',
  
  /**
   * ç§»åŠ¨ç½‘ç»œ - 5G
   */
  MOBILE_5G = 'mobile_5g',
  
  /**
   * å…¶ä»–ç½‘ç»œ
   */
  OTHER = 'other'
}

/**
 * ä»£ç†ç±»å‹æšä¸¾
 */
export enum ProxyType {
  /**
   * ä¸ä½¿ç”¨ä»£ç?
   */
  NONE = 'none',
  
  /**
   * HTTPä»£ç†
   */
  HTTP = 'http',
  
  /**
   * HTTPSä»£ç†
   */
  HTTPS = 'https',
  
  /**
   * SOCKS5ä»£ç†
   */
  SOCKS5 = 'socks5'
}

/**
 * ä»£ç†é…ç½®æ¥å£
 */
export interface ProxyConfig {
  /**
   * ä»£ç†ç±»å‹
   */
  type: ProxyType;
  
  /**
   * ä»£ç†æœåŠ¡å™¨åœ°å€
   */
  host: string;
  
  /**
   * ä»£ç†æœåŠ¡å™¨ç«¯å?
   */
  port: number;
  
  /**
   * ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰
   */
  username?: string;
  
  /**
   * å¯†ç ï¼ˆå¯é€‰ï¼‰
   */
  password?: string;
  
  /**
   * ç»•è¿‡ä»£ç†çš„åŸŸååˆ—è¡?
   */
  bypassList?: string[];
}

/**
 * ç½‘ç»œé…ç½®æ¥å£
 */
export interface NetworkConfig {
  /**
   * åŸºç¡€URL
   */
  baseUrl: string;
  
  /**
   * é»˜è®¤è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
   */
  timeout: number;
  
  /**
   * é»˜è®¤é‡è¯•æ¬¡æ•°
   */
  retryCount: number;
  
  /**
   * é»˜è®¤é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
   */
  retryDelay: number;
  
  /**
   * æ˜¯å¦ä½¿ç”¨ç¼“å­˜
   */
  useCache: boolean;
  
  /**
   * é»˜è®¤ç¼“å­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
   */
  cacheTime: number;
  
  /**
   * ä»£ç†é…ç½®
   */
  proxyConfig: ProxyConfig;
  
  /**
   * æœ€å¤§å¹¶å‘è¿æ¥æ•°
   */
  maxConnections: number;
  
  /**
   * æ˜¯å¦åœ¨å¼±ç½‘ä¸‹å‹ç¼©æ•°æ®
   */
  compressDataOnWeakNetwork: boolean;
}

/**
 * ç½‘ç»œç»Ÿè®¡ä¿¡æ¯æ¥å£
 */
export interface NetworkStats {
  /**
   * æ€»è¯·æ±‚æ¬¡æ•?
   */
  totalRequests: number;
  
  /**
   * æˆåŠŸè¯·æ±‚æ¬¡æ•°
   */
  successRequests: number;
  
  /**
   * å¤±è´¥è¯·æ±‚æ¬¡æ•°
   */
  failedRequests: number;
  
  /**
   * å¹³å‡å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
   */
  averageResponseTime: number;
  
  /**
   * æ€»ä¸Šä¼ æµé‡ï¼ˆå­—èŠ‚ï¼?
   */
  totalUploadBytes: number;
  
  /**
   * æ€»ä¸‹è½½æµé‡ï¼ˆå­—èŠ‚ï¼?
   */
  totalDownloadBytes: number;
  
  /**
   * å½“å‰ç½‘ç»œç±»å‹
   */
  currentNetworkType: NetworkType;
  
  /**
   * å½“å‰ç½‘ç»œçŠ¶æ€?
   */
  currentNetworkStatus: NetworkStatus;
  
  /**
   * æœ€åç½‘ç»œå˜åŒ–æ—¶é—´æˆ³
   */
  lastNetworkChangeTimestamp: number;
}

/**
 * ç½‘ç»œäº‹ä»¶ç±»å‹æšä¸¾
 */
export enum NetworkEventType {
  /**
   * ç½‘ç»œçŠ¶æ€å˜åŒ?
   */
  STATUS_CHANGED = 'status_changed',
  
  /**
   * ç½‘ç»œç±»å‹å˜åŒ–
   */
  TYPE_CHANGED = 'type_changed',
  
  /**
   * å¸¦å®½å˜åŒ–
   */
  BANDWIDTH_CHANGED = 'bandwidth_changed',
  
  /**
   * ä»£ç†çŠ¶æ€å˜åŒ?
   */
  PROXY_STATUS_CHANGED = 'proxy_status_changed',
  
  /**
   * ç½‘ç»œé”™è¯¯
   */
  ERROR = 'error'
}

/**
 * ç½‘ç»œç›‘å¬å™¨æ¥å?
 */
export interface NetworkListener {
  /**
   * å¤„ç†ç½‘ç»œäº‹ä»¶
   * @param eventType äº‹ä»¶ç±»å‹
   * @param data äº‹ä»¶æ•°æ®
   */
  onNetworkEvent(eventType: NetworkEventType, data: Record<string, string | number | boolean | null>): void;
}

/**
 * ç½‘ç»œæ‹¦æˆªå™¨æ¥å?
 */
export interface NetworkInterceptor<T = unknown, R = unknown> {
  /**
   * è¯·æ±‚æ‹¦æˆª
   * @param request è¯·æ±‚é…ç½®
   * @returns å¤„ç†åçš„è¯·æ±‚é…ç½®
   */
  interceptRequest(request: RequestOptions & { url: string; method: RequestMethod }): T;
  
  /**
   * å“åº”æ‹¦æˆª
   * @param response å“åº”æ•°æ®
   * @returns å¤„ç†åçš„å“åº”æ•°æ®
   */
  interceptResponse(response: Record<string, string | number | boolean | null>): R;
}

/**
 * ç½‘ç»œæµ‹é€Ÿç»“æœæ¥å?
 */
export interface SpeedTestResult {
  /**
   * ä¸‹è½½é€Ÿåº¦ï¼ˆå­—èŠ?ç§’ï¼‰
   */
  downloadSpeed: number;
  
  /**
   * ä¸Šä¼ é€Ÿåº¦ï¼ˆå­—èŠ?ç§’ï¼‰
   */
  uploadSpeed: number;
  
  /**
   * å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
   */
  latency: number;
  
  /**
   * æŠ–åŠ¨ï¼ˆæ¯«ç§’ï¼‰
   */
  jitter: number;
  
  /**
   * ä¸¢åŒ…ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
   */
  packetLoss: number;
  
  /**
   * æµ‹é€Ÿæ—¶é—´æˆ³
   */
  timestamp: number;
  
  /**
   * æµ‹é€ŸæœåŠ¡å™¨
   */
  server?: string;
}

/**
 * ä¸‹è½½ä»»åŠ¡çŠ¶æ€æšä¸?
 */
export enum DownloadTaskStatus {
  /**
   * ç­‰å¾…ä¸?
   */
  WAITING = 'waiting',
  
  /**
   * ä¸‹è½½ä¸?
   */
  DOWNLOADING = 'downloading',
  
  /**
   * æš‚åœ
   */
  PAUSED = 'paused',
  
  /**
   * å®Œæˆ
   */
  COMPLETED = 'completed',
  
  /**
   * å¤±è´¥
   */
  FAILED = 'failed',
  
  /**
   * å–æ¶ˆ
   */
  CANCELLED = 'cancelled'
}

/**
 * æ–‡ä»¶ä¸Šä¼ é…ç½®æ¥å£
 */
export interface UploadConfig {
  /**
   * æ–‡ä»¶è·¯å¾„
   */
  filePath: string;
  
  /**
   * æ–‡ä»¶ç±»å‹
   */
  fileType?: string;
  
  /**
   * ä¸Šä¼ å­—æ®µå?
   */
  fieldName?: string;
  
  /**
   * é¢å¤–è¡¨å•æ•°æ®
   */
  formData?: Record<string, string>;
  
  /**
   * åˆ†å—å¤§å°ï¼ˆå­—èŠ‚ï¼‰
   */
  chunkSize?: number;
  
  /**
   * æ˜¯å¦å¯ç”¨æ–­ç‚¹ç»­ä¼ 
   */
  enableResume?: boolean;
}

/**
 * ä¸‹è½½è¿›åº¦æ¥å£
 */
export interface DownloadProgress {
  /**
   * å·²ä¸‹è½½å­—èŠ‚æ•°
   */
  downloadedBytes: number;
  
  /**
   * æ€»å­—èŠ‚æ•°
   */
  totalBytes: number;
  
  /**
   * ä¸‹è½½ç™¾åˆ†æ¯?
   */
  progress: number;
  
  /**
   * å½“å‰é€Ÿåº¦ï¼ˆå­—èŠ?ç§’ï¼‰
   */
  speed: number;
  
  /**
   * å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼?
   */
  remainingTime?: number;
}

/**
 * WebSocketçŠ¶æ€æšä¸?
 */
export enum WebSocketStatus {
  /**
   * è¿æ¥ä¸?
   */
  CONNECTING = 'connecting',
  
  /**
   * å·²è¿æ?
   */
  CONNECTED = 'connected',
  
  /**
   * å…³é—­ä¸?
   */
  CLOSING = 'closing',
  
  /**
   * å·²å…³é—?
   */
  CLOSED = 'closed',
  
  /**
   * é”™è¯¯
   */
  ERROR = 'error'
}

/**
 * WebSocketé…ç½®æ¥å£
 */
export interface WebSocketConfig {
  /**
   * WebSocket URL
   */
  url: string;
  
  /**
   * åè®®
   */
  protocols?: string | string[];
  
  /**
   * å¿ƒè·³é—´éš”ï¼ˆæ¯«ç§’ï¼‰
   */
  heartbeatInterval?: number;
  
  /**
   * é‡è¿æ¬¡æ•°
   */
  reconnectAttempts?: number;
  
  /**
   * é‡è¿å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
   */
  reconnectDelay?: number;
  
  /**
   * æ˜¯å¦è‡ªåŠ¨é‡è¿
   */
  autoReconnect?: boolean;
}

