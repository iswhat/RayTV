# RayTVå·¥ç¨‹ç»¼åˆä¼˜åŒ–è®¡åˆ’

## æ–‡æ¡£ç›®çš„

æœ¬æ–‡æ¡£æ˜¯RayTVå·¥ç¨‹çš„ç»¼åˆä¼˜åŒ–è®¡åˆ’ï¼Œæ•´åˆäº†æ¶æ„ä¸ç•Œé¢åˆ†æã€æŠ€æœ¯å®æ–½æ–¹æ¡ˆå’Œä»»åŠ¡è¿½è¸ªç³»ç»Ÿä¸‰ä¸ªæ–¹é¢çš„å†…å®¹ã€‚è¯¥è®¡åˆ’æ—¨åœ¨é€šè¿‡ç³»ç»Ÿæ€§çš„ä¼˜åŒ–ï¼Œæé«˜é¡¹ç›®çš„æ¶æ„è´¨é‡ã€ç•Œé¢æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ï¼ŒåŒæ—¶ä¸ºå›¢é˜Ÿæä¾›æ¸…æ™°çš„ä»»åŠ¡æ‰§è¡Œè·¯å¾„å’Œè¿›åº¦è¿½è¸ªæœºåˆ¶ã€‚

## 1. é¡¹ç›®ç°çŠ¶åˆ†æ

### 1.1 æ¶æ„ä¼˜åŠ¿

- **åˆ†å±‚æ¶æ„è®¾è®¡**ï¼šé‡‡ç”¨äº†è¾ƒä¸ºæ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼ŒåŒ…å«commonã€dataã€serviceã€pagesç­‰ç›®å½•
- **æœåŠ¡åŒ–è®¾è®¡**ï¼šå®ç°äº†å¤šä¸ªç‹¬ç«‹çš„æœåŠ¡æ¨¡å—ï¼ˆConfigSourceServiceã€ContentAggregatorç­‰ï¼‰
- **ä¾èµ–æ³¨å…¥ç³»ç»Ÿ**ï¼šå…·å¤‡DIå®¹å™¨å’Œäº‹ä»¶æ€»çº¿ï¼Œæ”¯æŒæ¾è€¦åˆè®¾è®¡
- **é…ç½®é©±åŠ¨æ¶æ„**ï¼šé‡‡ç”¨é…ç½®æºé©±åŠ¨çš„å†…å®¹èšåˆæ¨¡å¼ï¼Œç¬¦åˆå£³åº”ç”¨è®¾è®¡ç†å¿µ

### 1.2 æ¶æ„é—®é¢˜

#### 1.2.1 é«˜è€¦åˆé£é™©ç‚¹

**æœåŠ¡å±‚å†…éƒ¨è€¦åˆä¸¥é‡**
- ç›´æ¥ä¾èµ–å…·ä½“æœåŠ¡å®ç°ï¼Œè¿åä¾èµ–å€’ç½®åŸåˆ™
- æœåŠ¡é—´ç¼ºä¹æŠ½è±¡æ¥å£å±‚
- éš¾ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•å’Œmock

**å‰åç«¯åˆ†ç¦»ä¸è¶³**
- é¡µé¢ç»„ä»¶ç›´æ¥ä¾èµ–æœåŠ¡å®ç°
- ç¼ºä¹ViewModelå±‚è¿›è¡Œæ•°æ®è½¬æ¢å’ŒçŠ¶æ€ç®¡ç†
- ä¸šåŠ¡é€»è¾‘ä¸UIé€»è¾‘æ··åˆ

#### 1.2.2 æ¥å£è®¾è®¡é—®é¢˜
- æ¥å£ç²’åº¦è¿‡ç²—ï¼Œä¸€ä¸ªæ¥å£æ‰¿æ‹…è¿‡å¤šèŒè´£
- ä¸ç¬¦åˆæ¥å£éš”ç¦»åŸåˆ™
- éš¾ä»¥å®ç°æŒ‰éœ€ä¾èµ–

### 1.3 å‰ç«¯ç•Œé¢é—®é¢˜

#### 1.3.1 å¸ƒå±€ç»“æ„é—®é¢˜
- åµŒå¥—å±‚çº§è¿‡æ·±ï¼ˆæœ€å¤š6å±‚åµŒå¥—ï¼‰
- æ¡ä»¶æ¸²æŸ“é€»è¾‘å¤æ‚
- ç»„ä»¶å¤ç”¨æ€§å·®

#### 1.3.2 å“åº”å¼è®¾è®¡ä¸è¶³
- å±å¹•é€‚é…é€»è¾‘ç®€å•
- ç¼ºä¹ç»Ÿä¸€çš„å“åº”å¼å¸ƒå±€ç³»ç»Ÿ

#### 1.3.3 æ“ä½œé€»è¾‘é—®é¢˜
- å¯¼èˆªé€»è¾‘æ··ä¹±ï¼Œæ‰‹åŠ¨ç®¡ç†å†å²è®°å½•
- çŠ¶æ€ç®¡ç†åˆ†æ•£ï¼Œæ¯ä¸ªç»„ä»¶ç‹¬ç«‹ç®¡ç†çŠ¶æ€

## 2. ä¼˜åŒ–ç›®æ ‡å’Œé¢„æœŸæ”¶ç›Š

### 2.1 ä¼˜åŒ–ç›®æ ‡

- **æ¶æ„å±‚é¢**ï¼šé™ä½æ¨¡å—é—´è€¦åˆåº¦ï¼Œæé«˜ä»£ç å¯æµ‹è¯•æ€§ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæå‡å¼€å‘æ•ˆç‡
- **ç•Œé¢å±‚é¢**ï¼šæé«˜ç»„ä»¶å¤ç”¨ç‡ï¼Œå®ç°å“åº”å¼é€‚é…ï¼Œæå‡ç”¨æˆ·æ“ä½œæµç•…åº¦ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
- **æ€§èƒ½å±‚é¢**ï¼šæå‡é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œç¼©çŸ­é¦–å±æ¸²æŸ“æ—¶é—´ï¼Œé™ä½ç”¨æˆ·äº¤äº’å“åº”å»¶è¿Ÿ

### 2.2 é¢„æœŸæ”¶ç›Š

#### æ¶æ„å±‚é¢
- ğŸ”§ é™ä½æ¨¡å—é—´è€¦åˆåº¦50%ä»¥ä¸Š
- ğŸ”§ æé«˜ä»£ç å¯æµ‹è¯•æ€§è‡³80%
- ğŸ”§ å‡å°‘é‡å¤ä»£ç 30%
- ğŸ”§ æå‡å¼€å‘æ•ˆç‡40%

#### ç•Œé¢å±‚é¢
- ğŸ¨ ç»„ä»¶å¤ç”¨ç‡æå‡è‡³60%
- ğŸ¨ å“åº”å¼é€‚é…è¦†ç›–æ‰€æœ‰è®¾å¤‡
- ğŸ¨ ç”¨æˆ·æ“ä½œæµç•…åº¦æå‡50%
- ğŸ¨ ç»´æŠ¤æˆæœ¬é™ä½40%

#### æ€§èƒ½å±‚é¢
- âš¡ é¡µé¢åŠ è½½é€Ÿåº¦æå‡30%
- âš¡ å†…å­˜å ç”¨å‡å°‘25%
- âš¡ é¦–å±æ¸²æŸ“æ—¶é—´ç¼©çŸ­40%
- âš¡ ç”¨æˆ·äº¤äº’å“åº”å»¶è¿Ÿé™ä½50%

## 3. è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ

### 3.1 æ¶æ„è§£è€¦ä¼˜åŒ–

#### 3.1.1 ä¾èµ–æ³¨å…¥ç³»ç»Ÿå®Œå–„

**å®ç°æ–¹æ¡ˆ**ï¼š
- å¢å¼ºç°æœ‰DIå®¹å™¨ï¼Œæ”¯æŒå»¶è¿Ÿè§£æå’Œæ‰¹é‡æ³¨å†ŒæœåŠ¡
- å®ç°æœåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ã€é”€æ¯ã€æ¿€æ´»å’Œåœç”¨
- å»ºç«‹æœåŠ¡æŠ½è±¡æ¥å£å±‚ï¼Œå®ç°ä¾èµ–å€’ç½®åŸåˆ™

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// common/di/EnhancedContainer.ts
export class EnhancedDIContainer extends DIContainer {
  private lazyResolvers: Map<string, () => any> = new Map();
  
  /**
   * å»¶è¿Ÿè§£ææœåŠ¡
   */
  public registerLazy<T>(token: string, resolver: () => T): void {
    this.lazyResolvers.set(token, resolver);
  }
  
  /**
   * è§£ææœåŠ¡æ—¶æ”¯æŒå»¶è¿ŸåŠ è½½
   */
  public override resolve<T>(token: string): T {
    if (this.lazyResolvers.has(token)) {
      const resolver = this.lazyResolvers.get(token)!;
      const instance = resolver();
      this.register(token, () => instance, true);
      this.lazyResolvers.delete(token);
      return instance;
    }
    return super.resolve(token);
  }
  
  /**
   * æ‰¹é‡æ³¨å†ŒæœåŠ¡
   */
  public registerBatch(services: Array<{token: string, factory: ServiceFactory<any>, singleton?: boolean}>): void {
    services.forEach(({token, factory, singleton = true}) => {
      this.register(token, factory, singleton);
    });
  }
}

// common/di/ServiceLifecycle.ts
export interface ServiceLifecycle {
  onInitialize?(): Promise<void>;
  onDestroy?(): Promise<void>;
  onActivate?(): void;
  onDeactivate?(): void;
}

export class LifecycleManager {
  private services: Map<string, ServiceLifecycle> = new Map();
  
  public registerService(token: string, service: ServiceLifecycle): void {
    this.services.set(token, service);
  }
  
  public async initializeAll(): Promise<void> {
    const promises = Array.from(this.services.entries()).map(async ([token, service]) => {
      try {
        await service.onInitialize?.();
      } catch (error) {
        console.error(`Failed to initialize service ${token}:`, error);
      }
    });
    await Promise.all(promises);
  }
  
  public async destroyAll(): Promise<void> {
    const promises = Array.from(this.services.entries()).map(async ([token, service]) => {
      try {
        await service.onDestroy?.();
      } catch (error) {
        console.error(`Failed to destroy service ${token}:`, error);
      }
    });
    await Promise.all(promises);
  }
}
```

#### 3.1.2 ViewModelå±‚å®ç°

**å®ç°æ–¹æ¡ˆ**ï¼š
- åˆ›å»ºåŸºç¡€ViewModelç±»ï¼Œæä¾›äº‹ä»¶è®¢é˜…å’Œå‘å¸ƒåŠŸèƒ½
- å®ç°å…·ä½“çš„ViewModelç±»ï¼Œå¦‚MainViewModelï¼Œè´Ÿè´£æ•°æ®è½¬æ¢å’ŒçŠ¶æ€ç®¡ç†
- å»ºç«‹ViewModelä¸UIç»„ä»¶çš„é€šä¿¡æœºåˆ¶

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// presentation/viewmodel/BaseViewModel.ts
import { EventBus } from '../../common/event/EventBus';
import { DIContainer } from '../../common/di/Container';

export abstract class BaseViewModel {
  protected eventBus: EventBus;
  protected diContainer: DIContainer;
  protected disposables: Array<() => void> = [];
  
  constructor() {
    this.eventBus = EventBus.getInstance();
    this.diContainer = DIContainer.getInstance();
    this.setupSubscriptions();
  }
  
  protected abstract setupSubscriptions(): void;
  
  protected subscribe<T>(eventName: string, callback: (data: T) => void): void {
    const subscriptionId = this.eventBus.subscribe(eventName, callback);
    this.disposables.push(() => this.eventBus.unsubscribe(eventName, subscriptionId));
  }
  
  public dispose(): void {
    this.disposables.forEach(dispose => dispose());
    this.disposables = [];
  }
  
  protected emit<T>(eventName: string, data?: T): void {
    this.eventBus.publish(eventName, data);
  }
}

// presentation/viewmodel/MainViewModel.ts
import { BaseViewModel } from './BaseViewModel';
import { Observable } from '../../common/util/Observable';
import { IMediaService } from '../../service/interfaces/IMediaService';
import { IConfigService } from '../../service/interfaces/IConfigService';

interface ViewState {
  selectedTab: string;
  featuredMedia: MediaItem[];
  isLoading: boolean;
  error: string | null;
  categories: CategoryItem[];
}

export class MainViewModel extends BaseViewModel {
  public state = new Observable<ViewState>({
    selectedTab: 'vod',
    featuredMedia: [],
    isLoading: false,
    error: null,
    categories: []
  });
  
  private mediaService: IMediaService;
  private configService: IConfigService;
  
  constructor() {
    super();
    this.mediaService = this.diContainer.resolve<IMediaService>('mediaService');
    this.configService = this.diContainer.resolve<IConfigService>('configService');
  }
  
  protected setupSubscriptions(): void {
    this.subscribe('config:changed', () => this.refreshContent());
    this.subscribe('network:status', (status) => this.handleNetworkChange(status));
  }
  
  public async loadInitialData(): Promise<void> {
    await Promise.all([
      this.loadCategories(),
      this.loadFeaturedContent()
    ]);
  }
  
  public selectTab(tab: string): void {
    this.state.update(current => ({
      ...current,
      selectedTab: tab
    }));
    
    if (tab === 'vod') {
      this.loadFeaturedContent();
    }
  }
  
  public async refreshContent(): Promise<void> {
    this.state.update(current => ({
      ...current,
      isLoading: true,
      error: null
    }));
    
    try {
      const content = await this.mediaService.getRecommendedContent();
      this.state.update(current => ({
        ...current,
        featuredMedia: content,
        isLoading: false
      }));
    } catch (error) {
      this.state.update(current => ({
        ...current,
        error: error.message,
        isLoading: false
      }));
    }
  }
  
  private async loadCategories(): Promise<void> {
    const categories = await this.configService.getCategories();
    this.state.update(current => ({
      ...current,
      categories
    }));
  }
  
  private async loadFeaturedContent(): Promise<void> {
    // å®ç°å†…å®¹åŠ è½½é€»è¾‘
  }
  
  private handleNetworkChange(status: NetworkStatus): void {
    if (status.isConnected && this.state.value.error) {
      this.refreshContent();
    }
  }
}
```

#### 3.1.3 æœåŠ¡æ¥å£ç»†åŒ–

**å®ç°æ–¹æ¡ˆ**ï¼š
- å°†å¤§æ¥å£æ‹†åˆ†ä¸ºå°æ¥å£ï¼Œå®ç°æ¥å£éš”ç¦»åŸåˆ™
- å»ºç«‹æœåŠ¡æŠ½è±¡æ¥å£å±‚ï¼Œå®ç°ä¾èµ–å€’ç½®åŸåˆ™
- æä¾›é»˜è®¤å®ç°ï¼Œç¡®ä¿å‘åå…¼å®¹æ€§

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// å°†å¤§æ¥å£æ‹†åˆ†ä¸ºå°æ¥å£
interface IConfigLoader {
  load(url: string): Promise<ConfigSource>;
}

interface IConfigParser {
  parse(content: string): Promise<ParsedConfig>;
}

interface IConfigValidator {
  validate(config: any): boolean;
}

// ç»„åˆæ¥å£
interface IConfigSourceService extends IConfigLoader, IConfigParser, IConfigValidator {
  // åªä¿ç•™å¿…è¦çš„é«˜å±‚æ–¹æ³•
}
```

### 3.2 ç•Œé¢å¸ƒå±€ä¼˜åŒ–

#### 3.2.1 ç»„ä»¶åŒ–é‡æ„

**å®ç°æ–¹æ¡ˆ**ï¼š
- æå–å¯å¤ç”¨çš„UIç»„ä»¶ï¼Œå¦‚MediaCardã€CategoryTabsç­‰
- å»ºç«‹åŸºç¡€ç»„ä»¶åº“ï¼Œæä¾›ç»Ÿä¸€çš„ç»„ä»¶æ¥å£å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- å®ç°ç»„ä»¶åŒ–çš„é¡µé¢ç»“æ„ï¼Œå‡å°‘åµŒå¥—å±‚çº§

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// components/core/BaseComponent.ts
export abstract class BaseComponent {
  protected abstract build(): void;
  
  protected createState<T>(initialValue: T): Observable<T> {
    return new Observable(initialValue);
  }
  
  protected useEffect(callback: () => void, dependencies: any[]): void {
    // å®ç°å‰¯ä½œç”¨ç®¡ç†
  }
}

// components/ui/MediaCard.ets
@Component
export class MediaCard {
  @Prop mediaItem: MediaItem;
  @Prop onPress: (item: MediaItem) => void;
  
  build() {
    Column() {
      Image(this.mediaItem.coverUrl)
        .width('100%')
        .aspectRatio(2/3)
        .borderRadius(8)
      
      Text(this.mediaItem.title)
        .fontSize(16)
        .maxLines(2)
        .textAlign(TextAlign.Center)
    }
    .onClick(() => this.onPress(this.mediaItem))
    .width(200)
    .padding(12)
  }
}

// components/ui/CategoryTabs.ets
@Component
export class CategoryTabs {
  @Prop categories: CategoryItem[];
  @Prop selectedCategory: string;
  @Prop onCategorySelect: (categoryId: string) => void;
  
  build() {
    Scroll() {
      Row() {
        ForEach(this.categories, category => {
          this.renderCategoryTab(category)
        })
      }
    }
  }
  
  @Builder
  private renderCategoryTab(category: CategoryItem): void {
    Text(category.name)
      .backgroundColor(this.selectedCategory === category.id ? '#007AFF' : '#333333')
      .fontColor(this.selectedCategory === category.id ? '#FFFFFF' : '#CCCCCC')
      .borderRadius(20)
      .padding({ left: 16, right: 16, top: 8, bottom: 8 })
      .onClick(() => this.onCategorySelect(category.id))
  }
}
```

#### 3.2.2 å“åº”å¼å¸ƒå±€ç³»ç»Ÿ

**å®ç°æ–¹æ¡ˆ**ï¼š
- å®ç°å“åº”å¼å¸ƒå±€ç³»ç»Ÿï¼Œæ”¯æŒä¸åŒå±å¹•å°ºå¯¸çš„é€‚é…
- å®šä¹‰æ–­ç‚¹å’Œå¸ƒå±€ç±»å‹ï¼Œæä¾›ç»Ÿä¸€çš„å¸ƒå±€è®¡ç®—æ–¹æ³•
- å®ç°å“åº”å¼ç½‘æ ¼ç³»ç»Ÿï¼Œæ”¯æŒä¸åŒå±å¹•å°ºå¯¸çš„åˆ—æ•°è°ƒæ•´

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// common/layout/ResponsiveSystem.ts
export class ResponsiveSystem {
  static breakpoints = {
    xs: 0,
    sm: 576,
    md: 768,
    lg: 992,
    xl: 1200,
    xxl: 1400
  };
  
  static getBreakpoint(width: number): keyof typeof this.breakpoints {
    if (width >= this.breakpoints.xxl) return 'xxl';
    if (width >= this.breakpoints.xl) return 'xl';
    if (width >= this.breakpoints.lg) return 'lg';
    if (width >= this.breakpoints.md) return 'md';
    if (width >= this.breakpoints.sm) return 'sm';
    return 'xs';
  }
  
  static getGridColumnCount(breakpoint: keyof typeof breakpoints): number {
    const columnMap = {
      xs: 1,
      sm: 2,
      md: 3,
      lg: 4,
      xl: 5,
      xxl: 6
    };
    return columnMap[breakpoint];
  }
  
  static getSpacing(breakpoint: keyof typeof breakpoints): number {
    const spacingMap = {
      xs: 8,
      sm: 12,
      md: 16,
      lg: 20,
      xl: 24,
      xxl: 28
    };
    return spacingMap[breakpoint];
  }
}
```

### 3.3 çŠ¶æ€ç®¡ç†ä¼˜åŒ–

#### 3.3.1 é›†ä¸­å¼çŠ¶æ€ç®¡ç†

**å®ç°æ–¹æ¡ˆ**ï¼š
- å®ç°é›†ä¸­å¼çŠ¶æ€ç®¡ç†ï¼Œç»Ÿä¸€ç®¡ç†åº”ç”¨çº§åˆ«çš„çŠ¶æ€
- æä¾›çŠ¶æ€è®¢é˜…å’Œå‘å¸ƒæœºåˆ¶ï¼Œå®ç°ç»„ä»¶é—´çš„é€šä¿¡
- å®ç°çŠ¶æ€æŒä¹…åŒ–ï¼Œç¡®ä¿åº”ç”¨é‡å¯åçŠ¶æ€ä¸ä¸¢å¤±

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// common/state/AppState.ts
import { Observable } from '../util/Observable';

class GlobalState {
  // ç”¨æˆ·çŠ¶æ€
  public currentUser = new Observable<UserInfo | null>(null);
  public isAuthenticated = new Observable<boolean>(false);
  
  // åº”ç”¨çŠ¶æ€
  public currentTheme = new Observable<'light' | 'dark'>('dark');
  public currentLanguage = new Observable<string>('zh-CN');
  
  // å¯¼èˆªçŠ¶æ€
  public currentRoute = new Observable<RouteInfo | null>(null);
  public navigationHistory = new Observable<RouteInfo[]>([]);
  
  // å†…å®¹çŠ¶æ€
  public selectedCategory = new Observable<string>('all');
  public searchQuery = new Observable<string>('');
  public favoriteItems = new Observable<MediaItem[]>([]);
}

export const AppState = new GlobalState();

// common/state/PersistenceManager.ts
import { StorageUtil } from '../util/StorageUtil';

export class PersistenceManager {
  private static instance: PersistenceManager;
  
  public static getInstance(): PersistenceManager {
    if (!this.instance) {
      this.instance = new PersistenceManager();
    }
    return this.instance;
  }
  
  public async persistState(key: string, state: any): Promise<void> {
    try {
      const serialized = JSON.stringify(state);
      await StorageUtil.setString(`state_${key}`, serialized);
    } catch (error) {
      console.error(`Failed to persist state ${key}:`, error);
    }
  }
  
  public async restoreState<T>(key: string, defaultValue: T): Promise<T> {
    try {
      const serialized = await StorageUtil.getString(`state_${key}`);
      if (serialized) {
        return JSON.parse(serialized);
      }
    } catch (error) {
      console.error(`Failed to restore state ${key}:`, error);
    }
    return defaultValue;
  }
  
  public async clearPersistedState(key: string): Promise<void> {
    await StorageUtil.remove(`state_${key}`);
  }
}
```

### 3.4 å¯¼èˆªç³»ç»Ÿé‡æ„

#### 3.4.1 ç»Ÿä¸€è·¯ç”±ç®¡ç†

**å®ç°æ–¹æ¡ˆ**ï¼š
- å®ç°ç»Ÿä¸€çš„è·¯ç”±ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒè·¯ç”±æ³¨å†Œå’ŒåŒ¹é…
- æä¾›å¯¼èˆªå®ˆå«æœºåˆ¶ï¼Œæ”¯æŒè·¯ç”±æƒé™æ§åˆ¶
- å®ç°è·¯ç”±çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒå¯¼èˆªå†å²è®°å½•

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// navigation/RouteManager.ts
export interface RouteDefinition {
  name: string;
  path: string;
  component: string;
  params?: Record<string, any>;
  meta?: {
    title?: string;
    requiresAuth?: boolean;
    transition?: string;
  };
}

export class RouteManager {
  private routes: Map<string, RouteDefinition> = new Map();
  private currentRoute: RouteDefinition | null = null;
  
  public addRoute(route: RouteDefinition): void {
    this.routes.set(route.name, route);
  }
  
  public getRoute(name: string): RouteDefinition | undefined {
    return this.routes.get(name);
  }
  
  public getCurrentRoute(): RouteDefinition | null {
    return this.currentRoute;
  }
  
  public setCurrentRoute(route: RouteDefinition): void {
    this.currentRoute = route;
  }
  
  public matchPath(path: string): RouteDefinition | undefined {
    for (const route of this.routes.values()) {
      if (this.pathMatches(route.path, path)) {
        return route;
      }
    }
    return undefined;
  }
  
  private pathMatches(pattern: string, path: string): boolean {
    // ç®€å•çš„è·¯å¾„åŒ¹é…å®ç°
    const patternParts = pattern.split('/');
    const pathParts = path.split('/');
    
    if (patternParts.length !== pathParts.length) {
      return false;
    }
    
    for (let i = 0; i < patternParts.length; i++) {
      const patternPart = patternParts[i];
      const pathPart = pathParts[i];
      
      if (patternPart.startsWith(':')) {
        continue; // å‚æ•°åŒ¹é…
      }
      
      if (patternPart !== pathPart) {
        return false;
      }
    }
    
    return true;
  }
}

// navigation/NavigationGuard.ts
export type NavigationGuard = (
  to: RouteDefinition,
  from: RouteDefinition | null
) => boolean | Promise<boolean>;

export class NavigationGuardManager {
  private guards: NavigationGuard[] = [];
  
  public addGuard(guard: NavigationGuard): void {
    this.guards.push(guard);
  }
  
  public async canActivate(
    to: RouteDefinition,
    from: RouteDefinition | null
  ): Promise<boolean> {
    for (const guard of this.guards) {
      const result = await guard(to, from);
      if (!result) {
        return false;
      }
    }
    return true;
  }
}

// è®¤è¯å®ˆå«ç¤ºä¾‹
export const authGuard: NavigationGuard = async (to, from) => {
  if (to.meta?.requiresAuth) {
    const isAuthenticated = AppState.isAuthenticated.value;
    if (!isAuthenticated) {
      // é‡å®šå‘åˆ°ç™»å½•é¡µ
      return false;
    }
  }
  return true;
};
```

### 3.5 æ•°æ®æµä¼˜åŒ–

#### 3.5.1 ç»Ÿä¸€æ•°æ®ä¼ è¾“å¯¹è±¡

**å®ç°æ–¹æ¡ˆ**ï¼š
- å®šä¹‰ç»Ÿä¸€çš„æ•°æ®ä¼ è¾“å¯¹è±¡(DTO)ï¼Œè§„èŒƒå‰åç«¯æ•°æ®äº¤æ¢æ ¼å¼
- å®ç°æ•°æ®æ˜ å°„å™¨ï¼Œè´Ÿè´£é¢†åŸŸæ¨¡å‹å’ŒDTOä¹‹é—´çš„è½¬æ¢
- å»ºç«‹æ•°æ®éªŒè¯æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// types/dto/MediaDTO.ts
export interface MediaContentDTO {
  id: string;
  title: string;
  description: string;
  coverImageUrl: string;
  contentType: 'vod' | 'live' | 'series';
  duration?: number;
  rating?: number;
  genres: string[];
  releaseYear?: number;
  sourceInfo: {
    siteKey: string;
    apiUrl: string;
    parserKey: string;
  };
  metadata: {
    createdAt: number;
    updatedAt: number;
    viewCount: number;
    likeCount: number;
  };
}

export interface MediaListResponseDTO {
  items: MediaContentDTO[];
  pagination: {
    currentPage: number;
    totalPages: number;
    totalItems: number;
    hasNextPage: boolean;
  };
  filters: {
    categories: string[];
    years: number[];
    sortBy: string;
  };
}

// common/mapper/MediaMapper.ts
import { MediaDomainModel } from '../../domain/model/MediaModel';
import { MediaContentDTO } from '../../types/dto/MediaDTO';

export class MediaMapper {
  public static toDTO(domainModel: MediaDomainModel): MediaContentDTO {
    return {
      id: domainModel.id,
      title: domainModel.title,
      description: domainModel.description,
      coverImageUrl: domainModel.coverImage?.url || '',
      contentType: domainModel.type,
      duration: domainModel.duration,
      rating: domainModel.rating,
      genres: domainModel.genres.map(g => g.name),
      releaseYear: domainModel.releaseDate?.getFullYear(),
      sourceInfo: {
        siteKey: domainModel.source.key,
        apiUrl: domainModel.source.apiUrl,
        parserKey: domainModel.source.parserKey
      },
      metadata: {
        createdAt: domainModel.createdAt.getTime(),
        updatedAt: domainModel.updatedAt.getTime(),
        viewCount: domainModel.statistics.viewCount,
        likeCount: domainModel.statistics.likeCount
      }
    };
  }
  
  public static fromDTO(dto: MediaContentDTO): MediaDomainModel {
    // å®ç°åå‘æ˜ å°„
    return new MediaDomainModel(/* ... */);
  }
}
```

### 3.6 æ€§èƒ½ä¼˜åŒ–

#### 3.6.1 å¤§æ•°æ®é›†å¤„ç†ä¼˜åŒ–

**å®ç°æ–¹æ¡ˆ**ï¼š
- å®ç°å†…å®¹èšåˆåˆ†é¡µåŠ è½½ï¼Œå‡å°‘ä¸€æ¬¡æ€§åŠ è½½çš„æ•°æ®é‡
- ä¼˜åŒ–å†…å®¹æ’åºç®—æ³•ï¼Œæé«˜æ’åºæ€§èƒ½
- å®ç°å¢é‡èšåˆæœºåˆ¶ï¼Œåªå¤„ç†æ–°å¢æˆ–å˜åŒ–çš„å†…å®¹

**æŠ€æœ¯å®ç°**ï¼š
- å®ç°ContentAggregatorçš„åˆ†é¡µåŠ è½½åŠŸèƒ½
- ä¼˜åŒ–æ’åºç®—æ³•ï¼Œä½¿ç”¨æ›´é«˜æ•ˆçš„æ’åºæ–¹æ³•
- å®ç°å¢é‡èšåˆï¼Œé€šè¿‡æ—¶é—´æˆ³æˆ–ç‰ˆæœ¬å·è¯†åˆ«å˜åŒ–çš„å†…å®¹

#### 3.6.2 è§£æå™¨æ€§èƒ½ä¼˜åŒ–

**å®ç°æ–¹æ¡ˆ**ï¼š
- å®ç°è§£æå™¨å¹¶è¡Œå¤„ç†ï¼Œæé«˜è§£ææ•ˆç‡
- ä¼˜åŒ–è§£æç¼“å­˜ç­–ç•¥ï¼Œå‡å°‘é‡å¤è§£æ
- å‡å°‘è§£æå™¨å†…å­˜ä½¿ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼

**æŠ€æœ¯å®ç°**ï¼š
- ä½¿ç”¨Promise.allæˆ–Workerçº¿ç¨‹å®ç°å¹¶è¡Œè§£æ
- å®ç°å¤šçº§ç¼“å­˜ç­–ç•¥ï¼Œç¼“å­˜è§£æç»“æœ
- åŠæ—¶é‡Šæ”¾è§£æè¿‡ç¨‹ä¸­åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡

#### 3.6.3 UIæ€§èƒ½ä¼˜åŒ–

**å®ç°æ–¹æ¡ˆ**ï¼š
- å®ç°UIæ•°æ®æ‡’åŠ è½½ï¼Œå‡å°‘åˆå§‹åŠ è½½æ—¶é—´
- ä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“æ€§èƒ½ï¼Œä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ç­‰æŠ€æœ¯
- å‡å°‘UIé‡ç»˜ï¼Œä¼˜åŒ–ç»„ä»¶æ¸²æŸ“é€»è¾‘

**æŠ€æœ¯å®ç°**ï¼š
- å®ç°IntersectionObserveræˆ–ç±»ä¼¼æœºåˆ¶ï¼Œå®ç°æ»šåŠ¨åŠ è½½
- ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨ç»„ä»¶ï¼Œåªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„é¡¹ç›®
- ä¼˜åŒ–çŠ¶æ€æ›´æ–°é€»è¾‘ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“

## 4. å®æ–½æ­¥éª¤å’Œä¼˜å…ˆçº§

### 4.1 ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è®¾æ–½æ­å»ºï¼ˆ2-3å‘¨ï¼‰

**ä¼˜å…ˆçº§ï¼šé«˜**

1. **å®Œå–„ä¾èµ–æ³¨å…¥å®¹å™¨**
   - å®ç°EnhancedDIContainerï¼Œæ”¯æŒå»¶è¿Ÿè§£æå’Œæ‰¹é‡æ³¨å†Œ
   - å®ç°ServiceLifecycleï¼Œç®¡ç†æœåŠ¡ç”Ÿå‘½å‘¨æœŸ
   - å»ºç«‹æœåŠ¡æŠ½è±¡æ¥å£å±‚

2. **å»ºç«‹ViewModelæ¡†æ¶**
   - å®ç°BaseViewModelåŸºç±»
   - å®ç°MainViewModelç­‰å…·ä½“ViewModel
   - å»ºç«‹ViewModelä¸UIç»„ä»¶çš„é€šä¿¡æœºåˆ¶

3. **åˆ›å»ºå“åº”å¼å¸ƒå±€ç³»ç»Ÿ**
   - å®ç°ResponsiveSystemç±»
   - å®šä¹‰æ–­ç‚¹å’Œå¸ƒå±€ç±»å‹
   - å®ç°å“åº”å¼ç½‘æ ¼ç³»ç»Ÿ

4. **å»ºç«‹çŠ¶æ€ç®¡ç†æœºåˆ¶**
   - å®ç°AppStateé›†ä¸­å¼çŠ¶æ€ç®¡ç†
   - å®ç°PersistenceManagerçŠ¶æ€æŒä¹…åŒ–
   - å»ºç«‹çŠ¶æ€è®¢é˜…å’Œå‘å¸ƒæœºåˆ¶

### 4.2 ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½é‡æ„ï¼ˆ3-4å‘¨ï¼‰

**ä¼˜å…ˆçº§ï¼šé«˜**

1. **é‡æ„æœåŠ¡æ¥å£**
   - æ‹†åˆ†å¤§æ¥å£ä¸ºå°æ¥å£
   - å®ç°æœåŠ¡æŠ½è±¡æ¥å£å±‚
   - é‡æ„ç°æœ‰æœåŠ¡å®ç°

2. **å®ç°ViewModelå±‚**
   - ä¸ºæ‰€æœ‰ä¸»è¦é¡µé¢åˆ›å»ºViewModel
   - å®ç°æ•°æ®è½¬æ¢å’ŒçŠ¶æ€ç®¡ç†
   - å»ºç«‹ViewModelä¸æœåŠ¡å±‚çš„é€šä¿¡

3. **ç»„ä»¶åŒ–ç•Œé¢é‡æ„**
   - æå–å¯å¤ç”¨UIç»„ä»¶
   - å®ç°åŸºç¡€ç»„ä»¶åº“
   - é‡æ„é¡µé¢ä½¿ç”¨ç»„ä»¶åŒ–ç»“æ„

4. **ä¼˜åŒ–æ•°æ®æµå‘**
   - å®ç°ç»Ÿä¸€çš„æ•°æ®ä¼ è¾“å¯¹è±¡
   - å®ç°æ•°æ®æ˜ å°„å™¨
   - å»ºç«‹æ•°æ®éªŒè¯æœºåˆ¶

### 4.3 ç¬¬ä¸‰é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–å’Œå®Œå–„ï¼ˆ2-3å‘¨ï¼‰

**ä¼˜å…ˆçº§ï¼šä¸­**

1. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°å†…å®¹èšåˆåˆ†é¡µåŠ è½½
   - ä¼˜åŒ–è§£æå™¨æ€§èƒ½
   - å®ç°UIæ•°æ®æ‡’åŠ è½½

2. **æµ‹è¯•è¦†ç›–ç‡æå‡**
   - ç¼–å†™å•å…ƒæµ‹è¯•
   - å»ºç«‹æµ‹è¯•è¿è¡Œæœºåˆ¶
   - é›†æˆåˆ°å¼€å‘æµç¨‹

3. **æ–‡æ¡£å®Œå–„**
   - ç¼–å†™æ¨¡å—æ–‡æ¡£
   - å®‰è£…TypeDocå·¥å…·
   - ç”ŸæˆAPIæ–‡æ¡£

4. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
   - ä¼˜åŒ–å¯¼èˆªç³»ç»Ÿ
   - å®Œå–„é”™è¯¯å¤„ç†
   - æå‡ç•Œé¢æµç•…åº¦

## 5. è¯¦ç»†ä»»åŠ¡åˆ—è¡¨

### 5.1 æ¶æ„ä¼˜åŒ–ä»»åŠ¡

| ä»»åŠ¡ID | ä»»åŠ¡åç§° | æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è´Ÿè´£äºº | å¼€å§‹æ—¥æœŸ | å®Œæˆæ—¥æœŸ | å¤‡æ³¨ |
|--------|----------|------|----------|--------|------|--------|----------|----------|------|
| ARCH-001 | å®Œå–„ä¾èµ–æ³¨å…¥å®¹å™¨ | DIå®¹å™¨ | `src/main/ets/common/di/EnhancedContainer.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-002 | å®ç°æœåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç† | DIå®¹å™¨ | `src/main/ets/common/di/ServiceLifecycle.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-003 | åˆ›å»ºViewModelåŸºç±» | ViewModel | `src/main/ets/presentation/viewmodel/BaseViewModel.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-004 | å®ç°MainViewModel | ViewModel | `src/main/ets/presentation/viewmodel/MainViewModel.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-005 | æ‹†åˆ†æœåŠ¡æ¥å£ | æœåŠ¡å±‚ | `src/main/ets/service/interfaces/` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-006 | å®ç°å“åº”å¼å¸ƒå±€ç³»ç»Ÿ | å¸ƒå±€ç³»ç»Ÿ | `src/main/ets/common/layout/ResponsiveSystem.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-007 | å®ç°é›†ä¸­å¼çŠ¶æ€ç®¡ç† | çŠ¶æ€ç®¡ç† | `src/main/ets/common/state/AppState.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-008 | å®ç°çŠ¶æ€æŒä¹…åŒ– | çŠ¶æ€ç®¡ç† | `src/main/ets/common/state/PersistenceManager.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-009 | å®ç°ç»Ÿä¸€è·¯ç”±ç®¡ç† | å¯¼èˆªç³»ç»Ÿ | `src/main/ets/navigation/RouteManager.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-010 | å®ç°å¯¼èˆªå®ˆå« | å¯¼èˆªç³»ç»Ÿ | `src/main/ets/navigation/NavigationGuard.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-011 | å®šä¹‰æ•°æ®ä¼ è¾“å¯¹è±¡ | æ•°æ®æ¨¡å‹ | `src/main/ets/types/dto/` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| ARCH-012 | å®ç°æ•°æ®æ˜ å°„å™¨ | æ•°æ®æ¨¡å‹ | `src/main/ets/common/mapper/` | é«˜ | æœªå¼€å§‹ | - | - | - | - |

### 5.2 ç•Œé¢ä¼˜åŒ–ä»»åŠ¡

| ä»»åŠ¡ID | ä»»åŠ¡åç§° | æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è´Ÿè´£äºº | å¼€å§‹æ—¥æœŸ | å®Œæˆæ—¥æœŸ | å¤‡æ³¨ |
|--------|----------|------|----------|--------|------|--------|----------|----------|------|
| UI-001 | åˆ›å»ºåŸºç¡€ç»„ä»¶åº“ | ç»„ä»¶åº“ | `src/main/ets/components/core/BaseComponent.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| UI-002 | å®ç°MediaCardç»„ä»¶ | UIç»„ä»¶ | `src/main/ets/components/ui/MediaCard.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| UI-003 | å®ç°CategoryTabsç»„ä»¶ | UIç»„ä»¶ | `src/main/ets/components/ui/CategoryTabs.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| UI-004 | é‡æ„MainPageä½¿ç”¨ViewModel | é¡µé¢ | `src/main/ets/pages/HomePage.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| UI-005 | å®ç°ç»„ä»¶åŒ–é¡µé¢ç»“æ„ | é¡µé¢ | `src/main/ets/pages/` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| UI-006 | å®ç°å“åº”å¼å¸ƒå±€ | é¡µé¢ | `src/main/ets/pages/` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| UI-007 | ä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“æ€§èƒ½ | é¡µé¢ | `src/main/ets/pages/HomePage.ets` | ä¸­ | æœªå¼€å§‹ | - | - | - | - |
| UI-008 | å®ç°UIæ•°æ®æ‡’åŠ è½½ | é¡µé¢ | `src/main/ets/pages/HomePage.ets` | ä¸­ | æœªå¼€å§‹ | - | - | - | - |
| UI-009 | å‡å°‘UIé‡ç»˜ | é¡µé¢ | `src/main/ets/pages/` | ä¸­ | æœªå¼€å§‹ | - | - | - | - |

### 5.3 æ€§èƒ½ä¼˜åŒ–ä»»åŠ¡

| ä»»åŠ¡ID | ä»»åŠ¡åç§° | æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è´Ÿè´£äºº | å¼€å§‹æ—¥æœŸ | å®Œæˆæ—¥æœŸ | å¤‡æ³¨ |
|--------|----------|------|----------|--------|------|--------|----------|----------|------|
| PERF-001 | å®ç°å†…å®¹èšåˆåˆ†é¡µåŠ è½½ | ContentAggregator | `src/main/ets/service/content/ContentAggregator.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-002 | ä¼˜åŒ–å†…å®¹æ’åºç®—æ³• | ContentAggregator | `src/main/ets/service/content/ContentAggregator.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-003 | å®ç°å¢é‡èšåˆæœºåˆ¶ | ContentAggregator | `src/main/ets/service/content/ContentAggregator.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-004 | å®ç°è§£æå™¨å¹¶è¡Œå¤„ç† | ParserManager | `src/main/ets/service/parser/ParserManager.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-005 | ä¼˜åŒ–è§£æç¼“å­˜ç­–ç•¥ | ParserManager | `src/main/ets/service/parser/ParserManager.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-006 | å‡å°‘è§£æå™¨å†…å­˜ä½¿ç”¨ | ParserManager | `src/main/ets/service/parser/ParserManager.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-007 | å®ç°æ™ºèƒ½ç¼“å­˜ç­–ç•¥ | MediaCacheService | `src/main/ets/service/media/MediaCacheService.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-008 | ä¼˜åŒ–ç¼“å­˜æ·˜æ±°ç®—æ³• | MediaCacheService | `src/main/ets/service/media/MediaCacheService.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-009 | ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢è¯­å¥ | SQLiteHelper | `src/main/ets/data/db/SQLiteHelper.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-010 | å®ç°æŸ¥è¯¢ç»“æœç¼“å­˜ | SQLiteHelper | `src/main/ets/data/db/SQLiteHelper.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| PERF-011 | å®ç°ç½‘ç»œè¯·æ±‚æ‰¹é‡å¤„ç† | HttpService | `src/main/ets/service/HttpService.ets` | ä¸­ | æœªå¼€å§‹ | - | - | - | - |
| PERF-012 | ä¼˜åŒ–HTTPè¿æ¥å¤ç”¨ | HttpService | `src/main/ets/service/HttpService.ets` | ä¸­ | æœªå¼€å§‹ | - | - | - | - |

### 5.4 æµ‹è¯•å’Œæ–‡æ¡£ä»»åŠ¡

| ä»»åŠ¡ID | ä»»åŠ¡åç§° | æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è´Ÿè´£äºº | å¼€å§‹æ—¥æœŸ | å®Œæˆæ—¥æœŸ | å¤‡æ³¨ |
|--------|----------|------|----------|--------|------|--------|----------|----------|------|
| TEST-001 | æ£€æŸ¥ç°æœ‰æµ‹è¯•æ¡†æ¶é…ç½® | æµ‹è¯•ç³»ç»Ÿ | - | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| TEST-002 | ç¼–å†™AppServiceå•å…ƒæµ‹è¯• | AppService | `src/main/ets/service/AppService.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| TEST-003 | ç¼–å†™HttpServiceå•å…ƒæµ‹è¯• | HttpService | `src/main/ets/service/HttpService.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| TEST-004 | ç¼–å†™ConfigSourceServiceå•å…ƒæµ‹è¯• | ConfigSourceService | `src/main/ets/service/config/ConfigSourceService.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| TEST-005 | ç¼–å†™ContentAggregatorå•å…ƒæµ‹è¯• | ContentAggregator | `src/main/ets/service/content/ContentAggregator.ts` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| TEST-006 | å»ºç«‹æµ‹è¯•è¿è¡Œæœºåˆ¶ | æµ‹è¯•ç³»ç»Ÿ | - | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| DOC-001 | åˆ›å»ºæ–‡æ¡£ç›®å½•ç»“æ„ | æ–‡æ¡£ç³»ç»Ÿ | - | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| DOC-002 | å®‰è£…TypeDocå·¥å…· | æ–‡æ¡£ç³»ç»Ÿ | - | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| DOC-003 | ç¼–å†™AppServiceæ–‡æ¡£ | AppService | `src/main/ets/service/AppService.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| DOC-004 | ç¼–å†™HttpServiceæ–‡æ¡£ | HttpService | `src/main/ets/service/HttpService.ets` | é«˜ | æœªå¼€å§‹ | - | - | - | - |
| DOC-005 | é›†æˆè‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£ | æ–‡æ¡£ç³»ç»Ÿ | - | é«˜ | æœªå¼€å§‹ | - | - | - | - |

## 6. æ‰§è¡Œè®°å½•

### 6.1 æ‰§è¡Œè®°å½•æ ¼å¼

æ¯æ¬¡æ‰§è¡Œä»»åŠ¡åï¼Œè¯·åœ¨æ­¤å¤„æ·»åŠ æ‰§è¡Œè®°å½•ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```
#### æ—¥æœŸï¼šYYYY-MM-DD

| ä»»åŠ¡ID | ä»»åŠ¡åç§° | æ‰§è¡Œå†…å®¹ | çŠ¶æ€å˜æ›´ | è´Ÿè´£äºº | å¤‡æ³¨ |
|--------|----------|----------|----------|--------|------|
| TASK-ID | ä»»åŠ¡åç§° | æ‰§è¡Œçš„å…·ä½“å†…å®¹ | ä»XXçŠ¶æ€å˜æ›´ä¸ºXXçŠ¶æ€ | è´Ÿè´£äººå§“å | æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ³¨æ„äº‹é¡¹æˆ–é—®é¢˜ |
```

### 6.2 æ‰§è¡Œè®°å½•

#### æ—¥æœŸï¼š

| ä»»åŠ¡ID | ä»»åŠ¡åç§° | æ‰§è¡Œå†…å®¹ | çŠ¶æ€å˜æ›´ | è´Ÿè´£äºº | å¤‡æ³¨ |
|--------|----------|----------|----------|--------|------|
| - | - | - | - | - | - |

## 7. è¿›åº¦ç»Ÿè®¡

### 7.1 æ€»ä½“è¿›åº¦

| ç±»åˆ« | ä»»åŠ¡æ€»æ•° | å·²å¼€å§‹ | è¿›è¡Œä¸­ | å·²å®Œæˆ | å®Œæˆç‡ |
|------|----------|--------|--------|--------|--------|
| æ¶æ„ä¼˜åŒ– | 12 | 0 | 0 | 0 | 0% |
| ç•Œé¢ä¼˜åŒ– | 9 | 0 | 0 | 0 | 0% |
| æ€§èƒ½ä¼˜åŒ– | 12 | 0 | 0 | 0 | 0% |
| æµ‹è¯•å’Œæ–‡æ¡£ | 11 | 0 | 0 | 0 | 0% |
| **æ€»è®¡** | **44** | **0** | **0** | **0** | **0%** |

### 7.2 æ¯å‘¨è¿›åº¦è¶‹åŠ¿

| å‘¨æ¬¡ | å¼€å§‹æ—¥æœŸ | å®Œæˆä»»åŠ¡æ•° | ç´¯è®¡å®Œæˆç‡ | å¤‡æ³¨ |
|------|----------|------------|------------|------|
| - | - | - | - | - |

## 8. é£é™©æ§åˆ¶å’Œå›æ»šç­–ç•¥

### 8.1 æ¸è¿›å¼å®æ–½

- **é‡‡ç”¨feature toggleæ–¹å¼**ï¼šé€æ­¥å¯ç”¨æ–°åŠŸèƒ½ï¼Œä¿æŒæ—§ä»£ç è·¯å¾„å¯ç”¨
- **åˆ†æ¨¡å—è¿›è¡Œé‡æ„**ï¼šæŒ‰æ¨¡å—é€æ­¥è¿›è¡Œé‡æ„ï¼Œé¿å…ä¸€æ¬¡æ€§ä¿®æ”¹è¿‡å¤šä»£ç 
- **ä¿æŒå‘åå…¼å®¹æ€§**ï¼šç¡®ä¿æ–°ä»£ç ä¸æ—§ä»£ç å¯ä»¥å…±å­˜ï¼Œæ–¹ä¾¿å›æ»š

### 8.2 ç›‘æ§å’ŒæŒ‡æ ‡

- **å»ºç«‹å…³é”®æ€§èƒ½æŒ‡æ ‡ç›‘æ§**ï¼šç›‘æ§é¡µé¢åŠ è½½é€Ÿåº¦ã€å†…å­˜å ç”¨ç­‰æŒ‡æ ‡
- **ç”¨æˆ·è¡Œä¸ºåˆ†æ**ï¼šæ”¶é›†ç”¨æˆ·æ“ä½œæ•°æ®ï¼Œåˆ†æä¼˜åŒ–æ•ˆæœ
- **é”™è¯¯ç‡ç›‘æ§**ï¼šç›‘æ§ç³»ç»Ÿé”™è¯¯ç‡ï¼ŒåŠæ—¶å‘ç°é—®é¢˜

### 8.3 å›æ»šæœºåˆ¶

- **ç‰ˆæœ¬æ§åˆ¶å’Œåˆ†æ”¯ç®¡ç†**ï¼šä½¿ç”¨Gitåˆ†æ”¯ç®¡ç†ï¼Œä¿ç•™ç¨³å®šç‰ˆæœ¬
- **å¿«é€Ÿå›æ»šæµç¨‹**ï¼šå»ºç«‹å¿«é€Ÿå›æ»šæœºåˆ¶ï¼Œå½“å‡ºç°é—®é¢˜æ—¶åŠæ—¶å›æ»š
- **æ•°æ®å¤‡ä»½ç­–ç•¥**ï¼šå®šæœŸå¤‡ä»½æ•°æ®ï¼Œç¡®ä¿æ•°æ®å®‰å…¨

## 9. é—®é¢˜è®°å½•

| é—®é¢˜ID | é—®é¢˜æè¿° | ç›¸å…³ä»»åŠ¡ | ä¸¥é‡ç¨‹åº¦ | çŠ¶æ€ | è§£å†³æ–¹æ¡ˆ | è´Ÿè´£äºº | è§£å†³æ—¥æœŸ |
|--------|----------|----------|----------|------|----------|--------|----------|
| - | - | - | - | - | - | - | - |

## 10. é™„å½•

### 10.1 èµ„æºé“¾æ¥

- [é¡¹ç›®ä»£ç ä»“åº“](https://github.com/raytv/raytv)
- [ç°æœ‰æµ‹è¯•æ–‡ä»¶](src/test/)
- [ç°æœ‰æ–‡æ¡£](docs/)

### 10.2 å·¥å…·ä½¿ç”¨æŒ‡å—

#### TypeDocä½¿ç”¨

1. å®‰è£…TypeDocï¼š
   ```bash
   npm install --save-dev typedoc
   ```

2. ç”Ÿæˆæ–‡æ¡£ï¼š
   ```bash
   npx typedoc --out docs/api src
   ```

#### æµ‹è¯•è¿è¡Œ

1. è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š
   ```bash
   npm test
   ```

2. è¿è¡Œç‰¹å®šæµ‹è¯•ï¼š
   ```bash
   npm test -- --testPathPattern=HttpService
   ```

### 10.3 çŠ¶æ€è¯´æ˜

| çŠ¶æ€ | æè¿° |
|------|------|
| æœªå¼€å§‹ | ä»»åŠ¡å°šæœªå¼€å§‹æ‰§è¡Œ |
| è¿›è¡Œä¸­ | ä»»åŠ¡æ­£åœ¨æ‰§è¡Œä¸­ |
| å·²å®Œæˆ | ä»»åŠ¡å·²å®Œæˆ |
| é˜»å¡ | ä»»åŠ¡å› æŸç§åŸå› æ— æ³•ç»§ç»­æ‰§è¡Œ |

### 10.4 ä¼˜å…ˆçº§è¯´æ˜

| ä¼˜å…ˆçº§ | æè¿° |
|--------|------|
| é«˜ | æ ¸å¿ƒä»»åŠ¡ï¼Œéœ€è¦ä¼˜å…ˆæ‰§è¡Œ |
| ä¸­ | é‡è¦ä»»åŠ¡ï¼ŒæŒ‰è®¡åˆ’æ‰§è¡Œ |
| ä½ | æ¬¡è¦ä»»åŠ¡ï¼Œå¯ä»¥å»¶åæ‰§è¡Œ |

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0.0  
**åˆ›å»ºæ—¥æœŸ**ï¼š2026-02-04  
**æœ€åæ›´æ–°**ï¼š2026-02-04  
**ç»´æŠ¤äºº**ï¼šRayTVå¼€å‘å›¢é˜Ÿ